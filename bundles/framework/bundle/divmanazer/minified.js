/* ===========================================================
 * bootstrap-tooltip.js v2.0.3 (with popover)
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/**
 * @class Oskari.userinterface.component.ProgressSpinner
 *
 * Adaptation of MIT licensed Spinner
 *
 *  http://fgnass.github.com/spin.js/
 *
 */

/**
             * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
             * Licensed under the MIT license
             */

Oskari.clazz.define("Oskari.userinterface.bundle.ui.UserInterfaceBundleInstance",function(){this.sandbox=null,this.requestHandlers={},this.extensions=[],this.extensionsByName={},this.compiledTemplates={},this.flyoutContainer=null,this.tileContainer=null,this.flyoutZIndexBase=1100,this.menubarContainerId="#menubar"},{getName:function(){return"userinterface.DivManazer"},init:function(e){},getExtensionByName:function(e){return this.extensionsByName[e]},getSandbox:function(){return this.sandbox},start:function(){this.compileTemplates();var e=this.conf,t=(e?e.sandbox:null)||"sandbox",n=Oskari.getSandbox(t),r,i,s,o,u;this.sandbox=n,this.flyoutContainer=jQuery(document.body),this.tileContainer=jQuery(this.menubarContainerId),this.tileContainer.addClass("oskari-tile-container"),this.sandbox.register(this),this.requestHandlers.add=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.AddExtensionRequestHandler",this),this.requestHandlers.remove=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.RemoveExtensionRequestHandler",this),this.requestHandlers.update=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.UpdateExtensionRequestHandler",this),n.addRequestHandler("userinterface.AddExtensionRequest",this.requestHandlers.add),n.addRequestHandler("userinterface.RemoveExtensionRequest",this.requestHandlers.remove),n.addRequestHandler("userinterface.UpdateExtensionRequest",this.requestHandlers.update),this.requestHandlers.modal=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.ModalDialogRequestHandler",this),n.addRequestHandler("userinterface.ModalDialogRequest",this.requestHandlers.modal);if(jQuery.browser.msie&&jQuery.browser.version<"9.0"){r=this.compiledTemplates["Oskari.userinterface.Flyout"].children(".oskari-flyoutcontentcontainer"),i=this.flyoutContainer.height(),s=this.ieFixClasses;for(o=0;o<s.length;o+=1){u=s[o];if(i>=u.min&&i<=u.max){r.addClass(u.cls);break}}}},update:function(){},stop:function(){sandbox.removeRequestHandler("userinterface.UpdateExtensionRequest",this.requestHandlers.update),sandbox.removeRequestHandler("userinterface.RemoveExtensionRequest",this.requestHandlers.remove),sandbox.removeRequestHandler("userinterface.AddExtensionRequest",this.requestHandlers.add),sandbox.removeRequestHandler("userinterface.ModalDialogRequest",this.requestHandlers.modal),this.sandbox.unregister(this),this.started=!1},templates:{"Oskari.userinterface.Tile":'<div class="oskari-tile oskari-tile-closed"><div class="oskari-tile-title"></div><div class="oskari-tile-status"></div></div>',"Oskari.userinterface.Flyout":'<div class="oskari-flyout oskari-closed"><div class="oskari-flyouttoolbar"><div class="oskari-flyoutheading"></div><div class="oskari-flyout-title"><p></p></div><div class="oskari-flyouttools"><div class="oskari-flyouttool-help"></div><div class="oskari-flyouttool-attach"></div><div class="oskari-flyouttool-detach"></div><div class="oskari-flyouttool-minimize"></div><div class="oskari-flyouttool-restore"></div><div class="oskari-flyouttool-close icon-close icon-close:hover"></div></div></div><div class="oskari-flyoutcontentcontainer"><div class="oskari-flyoutcontent"></div></div></div>',"Oskari.userinterface.View":'<div class="oskari-view"></div>'},compileTemplates:function(){var e=this,t;e.compiledTemplates["Oskari.userinterface.Tile"]=jQuery(this.templates["Oskari.userinterface.Tile"]),t=jQuery(e.templates["Oskari.userinterface.Flyout"]),t.css("left",e.defaults.attach.left),t.css("top",e.defaults.attach.top),e.compiledTemplates["Oskari.userinterface.Flyout"]=t,e.compiledTemplates["Oskari.userinterface.View"]=jQuery(this.templates["Oskari.userinterface.View"])},addExtension:function(e){var t=this,n,r,i,s,o,u,a,f,l,c,h,p,d,v;return e.startExtension(),n=e.getPlugins(),r=t.extensions,i=t.extensionsByName,s={state:"close",extension:e,draggable:null,draggableTarget:null,draggableHandle:null,viewState:{},extensionUpdatedEvent:null},s.extensionUpdatedEvent=t.sandbox.getEventBuilder("userinterface.ExtensionUpdatedEvent")(e,s.state),o=r.length,u=e.getName(),a=n["Oskari.userinterface.Flyout"],f=null,l=null,a!==null&&typeof a!="undefined"&&(f=t.createFlyout(e,a,o,s),t._applyDraggableToFlyout(f,s,".oskari-flyouttoolbar"),c=f.children(".oskari-flyoutcontentcontainer"),l=c.children(".oskari-flyoutcontent"),a.setEl(l.get()),t.flyoutContainer.append(f),a.startPlugin()),h=n["Oskari.userinterface.Tile"],p=null,h!==null&&typeof h!="undefined"&&(p=t.createTile(e,h,o,s),h.startPlugin(),p.fadeIn(200),t.tileContainer.append(p)),d=n["Oskari.userinterface.View"],v=null,d!==null&&typeof d!="undefined"&&(v=t.createView(e,d,o,s),l=v,d.setEl(l.get()),d.startPlugin()),s.plugins={},h&&(s.plugins["Oskari.userinterface.Tile"]={plugin:h,el:p}),a&&(s.plugins["Oskari.userinterface.Flyout"]={plugin:a,el:f}),d&&(s.plugins["Oskari.userinterface.View"]={plugin:d,el:v}),r.push(s),i[u]=s,s},_applyDraggableToFlyout:function(e,t,n){var r=this,i=e.children(n).get()[0],s=e.get()[0],o=!1,u;t.draggableHandle=i,t.draggableTarget=s,e.css("position","absolute"),t.draggable=$(e).draggable({handle:jQuery(i),helper:o?function(){return u=jQuery("<div />"),u.css("width",e.css("width")),u.css("height",e.css("height")),u.css("border","2px solid rgba(0,0,0,.5)"),u.css("z-index",e.css("z-index")),u}:null,scroll:!1,stack:".oskari-flyout",create:function(t,n){jQuery.browser.msie&&jQuery.browser.version[0]==="9"&&e.css("width",e.width()+"px")},start:function(){o&&e.css("display","none")},drag:function(){},stop:function(n,i){var s;o&&(e.css("top",i.helper.css("top")),e.css("left",i.helper.css("left"))),r.shuffleZIndices(e),o&&e.css("display",""),s=r.getFlyoutViewState(e,"detach"),t.viewState=s,r.notifyExtensionViewStateChange(t)}})},createTile:function(e,t,n,r){var i=this,s=this.compiledTemplates["Oskari.userinterface.Tile"].clone(!0,!0),o=s.children(".oskari-tile-title");return o.append(t.getTitle()),s.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"toggle"])}),t.setEl(s.get()),s},createFlyout:function(e,t,n,r){var i=this,s=this.compiledTemplates["Oskari.userinterface.Flyout"].clone(!0,!0),o,u;return s.find(".oskari-flyout-title p").append(t.getTitle()),o=s.children(".oskari-flyouttoolbar").children(".oskari-flyouttools"),u={attach:o.children(".oskari-flyouttool-attach"),detach:o.children(".oskari-flyouttool-detach"),minimize:o.children(".oskari-flyouttool-minimize"),restore:o.children(".oskari-flyouttool-restore"),close:o.children(".oskari-flyouttool-close"),help:o.children(".oskari-flyouttool-help")},u.detach.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"detach"])}),u.attach.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"attach"])}),u.minimize.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"minimize"])}),u.restore.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"restore"])}),u.close.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"close"])}),u.help.click(function(){i.getSandbox().postRequestByName("userguide.ShowUserGuideRequest",[{placement:"bottom",el:u.help,extension:e.getName(),toggle:!0}])}),s},createView:function(e,t,n,r){var i=this,s=i.compiledTemplates["Oskari.userinterface.View"].clone(!0,!0);return s},removeExtension:function(e){var t=this,n=t.extensions,r=this.extensionsByName,i=r[e.getName()],s=i.plugins["Oskari.userinterface.Flyout"],o,u,a,f,l,c,h,p,d;s&&(o=s.plugin,u=s.el,a=this.flyoutOps,f=a.close,f.apply(this,[u,o,i]),u.remove()),l=i.plugins["Oskari.userinterface.Tile"],l&&(c=l.el,c.remove()),r[e.getName()]=null,h=[];for(p=0,d=n.length;p<d;p+=1){if(n[p]===i)continue;h.push(n[p])}t.extensions=h,e.stopExtension()},updateExtension:function(e,t){var n=this,r=n.extensions,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;if(!e){for(i=0;i<r.length;i+=1)this.updateExtension(r[i].extension,t);return}s=this.extensionsByName,o=s[e.getName()],u=o.state,a=t.getState(),a==="toggle"&&(u==="close"?a="attach":u==="attach"?a="close":u==="detach"?a="minimize":u==="minimize"?a="restore":u==="restore"&&(a="minimize")),c=o.plugins["Oskari.userinterface.Flyout"];if(a==="attach"&&c){f=n.flyoutOps,h=f.close;for(p=0,A=r.length;p<A;p+=1){d=r[p];if(d===o)continue;if(d.state!=="attach")continue;v="close",m=d.plugins,g=m["Oskari.userinterface.Flyout"];if(!g)continue;y=g.plugin,b=g.el,d.state=v,h.apply(this,[b,y,d]),n.notifyExtensionViewStateChange(d),w=m["Oskari.userinterface.Tile"],w&&(E=w.el,n.applyTransition(E,v,n.tileTransitions))}}c&&(S=c.plugin,x=c.el,f=n.flyoutOps,l=f[a],l.apply(this,[x,S,o,r])),T=o.plugins["Oskari.userinterface.Tile"],T&&(N=T.el,n.applyTransition(N,a,n.tileTransitions)),C=o.plugins["Oskari.userinterface.View"],C&&(k=C.plugin,L=C.el,f=n.viewOps,l=f[a],l&&l.apply(this,[L,k,o,r])),o.state=a,n.notifyExtensionViewStateChange(o)},notifyExtensionViewStateChange:function(e){var t=e.extensionUpdatedEvent;t.setViewState(e.state),t.setViewInfo(e.viewState),this.sandbox.notifyAll(t,!0)},validStates:{attach:{attach:!0,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!1},detach:{attach:!1,detach:!0,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!1},minimize:{attach:!0,detach:!0,close:!1,minimize:!0,restore:!1,drawer:!1,sidebar:!1},restore:{attach:!1,detach:!0,close:!1,minimize:!1,restore:!0,drawer:!1,sidebar:!1},close:{attach:!1,detach:!1,close:!0,minimize:!1,restore:!1,drawer:!1,sidebar:!1},drawer:{attach:!1,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!0,sidebar:!1},sidebar:{attach:!1,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!0}},defaults:{detach:{left:"212px",top:"50px"},attach:{left:"192px",top:"30px"}},tileTransitions:{attach:{"oskari-tile-attached":!0,"oskari-tile-detached":!1,"oskari-tile-closed":!1},detach:{"oskari-tile-attached":!1,"oskari-tile-detached":!0,"oskari-tile-minimized":!1,"oskari-tile-closed":!1},minimize:{"oskari-tile-minimized":!0,"oskari-tile-closed":!1,"oskari-tile-detached":!1},restore:{"oskari-tile-minimized":!1,"oskari-tile-detached":!0},close:{"oskari-tile-closed":!0,"oskari-tile-attached":!1,"oskari-tile-detached":!1}},flyoutTransitions:{attach:{"oskari-attached":!0,"oskari-detached":!1,"oskari-closed":!1},detach:{"oskari-attached":!1,"oskari-detached":!0,"oskari-closed":!1},minimize:{"oskari-minimized":!0,"oskari-closed":!1,"oskari-detached":!1},restore:{"oskari-minimized":!1,"oskari-closed":!1,"oskari-detached":!0,"oskari-attached":!1},close:{"oskari-closed":!0,"oskari-minimized":!1,"oskari-detached":!1,"oskari-attached":!1}},applyTransition:function(e,t,n){var r=n[t],i;if(!r)return;for(i in r)r.hasOwnProperty(i)&&(r[i]?e.addClass(i):e.removeClass(i))},getFlyoutViewState:function(e,t){var n={left:e.css("left"),top:e.css("top"),width:e.width(),height:e.height(),"z-index":e.css("z-index"),viewState:t};return n},flyoutOps:{detach:function(e,t,n,r){var i=this,s;if(!n.viewState.left||!n.viewState.top||n.viewState.left===i.defaults.attach.left&&n.viewState.top===i.defaults.attach.top)n.viewState.left=i.defaults.detach.left,n.viewState.top=i.defaults.detach.top;i.shuffleZIndices(e),i.applyTransition(e,"detach",i.flyoutTransitions),s=i.getFlyoutViewState(e,"detach"),n.viewState=s},attach:function(e,t,n,r){var i=this,s;i.shuffleZIndices(e),i.applyTransition(e,"attach",i.flyoutTransitions),s=i.getFlyoutViewState(e,"attach"),n.viewState=s},minimize:function(e,t,n){var r=this,i=r.getFlyoutViewState(e,"minimize");r.applyTransition(e,"minimize",r.flyoutTransitions),n.viewState=i},restore:function(e,t,n){var r=this;r.applyTransition(e,"restore",r.flyoutTransitions)},close:function(e,t,n){var r=this;n.viewState={viewState:"close"},r.applyTransition(e,"close",r.flyoutTransitions)}},viewOps:{view:function(e,t,n,r){},close:function(e,t,n){}},setState:function(e){var t=this,n=e,r,i,s;if(!n)return;for(r in t.extensionsByName)if(t.extensionsByName.hasOwnProperty(r)){i=t.extensionsByName[r],s=n.extensionStatesByName[r];if(!s)continue;i.state=s.state,i.viewState=s.viewState||{}}},getState:function(){var e=this,t,n,r;e.refreshExtensionViewStates(),t={extensionStatesByName:{}};for(n in e.extensionsByName)e.extensionsByName.hasOwnProperty(n)&&(r=e.extensionsByName[n],t.extensionStatesByName[n]={state:r.state,viewState:r.viewState});return t},applyState:function(){var e=this;e.restoreExtensionViewStates()},refreshExtensionViewStates:function(){var e=this,t,n,r,i,s;for(t in e.extensionsByName)e.extensionsByName.hasOwnProperty(t)&&(n=e.extensionsByName[t],r=n.plugins["Oskari.userinterface.Flyout"],r&&(i=r.el,s=e.getFlyoutViewState(i,n.state),n.viewState=s))},restoreExtensionViewStates:function(){var e=this,t=e.flyoutOps,n=e.extensions,r,i,s,o,u,a,f,l,c;for(r in e.extensionsByName)e.extensionsByName.hasOwnProperty(r)&&(i=e.extensionsByName[r],s=i.plugins["Oskari.userinterface.Flyout"],s&&(o=s.plugin,u=s.el,a=i.viewState,u.removeAttr("style"),u.css("left",a.left),u.css("top",a.top),u.width(a.width),u.height(a.height),u.css("z-index",a["z-index"]),f=t[i.state],f.apply(e,[u,o,i,n])),l=i.plugins["Oskari.userinterface.Tile"],l&&(c=l.el,e.applyTransition(c,i.state,e.tileTransitions)))},_toggleMapWindowFullScreen:function(){var e=this,t=e.sandbox.getRequestBuilder("MapFull.MapWindowFullScreenRequest");t&&e.sandbox.request(e.getName(),t())},shuffleZIndices:function(e){var t=this,n=t.extensions,r=[],i={},s={},o={},u=1100;for(var a in t.extensionsByName){var f=t.extensionsByName[a],l=f.extension,c=f.plugins["Oskari.userinterface.Flyout"];if(c){var h=c.plugin,p=c.el,d=p.css("z-index");r.push(d);var v=""+d;i[v]=d,o[v]=p,s[v]=f}}r.sort();for(var m=0;m<r.length;m++){var v=r[m];i[v]=u+m,o[v].css("z-index",i[r[m]])}e.css("z-index",u+r.length+2)},ieFixClasses:[{min:400,max:599,cls:"oskari-flyoutcontentcontainer_IE_400_599"},{min:600,max:799,cls:"oskari-flyoutcontentcontainer_IE_600_799"},{min:800,max:999,cls:"oskari-flyoutcontentcontainer_IE_800_999"},{min:1e3,max:1199,cls:"oskari-flyoutcontentcontainer_IE_1000_1199"},{min:1200,max:1399,cls:"oskari-flyoutcontentcontainer_IE_1200_1399"},{min:1400,max:9999,cls:"oskari-flyoutcontentcontainer_IE_1400"}]},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Stateful"]}),define("bundles/framework/bundle/divmanazer/instance",function(){}),Oskari.clazz.define("Oskari.userinterface.request.AddExtensionRequest",function(e){this._extension=e},{__name:"userinterface.AddExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/AddExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.AddExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension();this.ui.addExtension(n)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/AddExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.RemoveExtensionRequest",function(e){this._extension=e},{__name:"userinterface.RemoveExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/RemoveExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.RemoveExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension();this.ui.removeExtension(n)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/RemoveExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.UpdateExtensionRequest",function(e,t,n){this._extension=e,this._state=t,this._extensionName=n},{__name:"userinterface.UpdateExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension},getState:function(){return this._state},getExtensionName:function(){return this._extensionName}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/UpdateExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.UpdateExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension(),r=t.getExtensionName();if(!n&&r&&r!="*"){var i=this.ui.getExtensionByName(r);if(!i)return;n=i.extension}this.ui.updateExtension(n,t)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/UpdateExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.ModalDialogRequest",function(e,t,n,r){this._title=e?e:"Untitled",this._message=t?t:"Lorem ipsum",this._buttons=n?n:{},this._parent=parent?parent:jQuery("#mapdiv"),this._onshow=r?r:null},{__name:"userinterface.ModalDialogRequest",getName:function(){return this.__name},getTitle:function(){return this._title},getMessage:function(){return this._message},getButtons:function(){return this._buttons},getGeom:function(){return this._geom},getParent:function(){return this._parent},getOnShow:function(){return this._onshow}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/ModalDialogRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.ModalDialogRequestHandler",function(e){this._ui=e,this._tpl={},this._tpl.modal=jQuery('<div id="modaldialog" class="modaldialog">  <div class="modaltitle"></div>  <div class="modalmessage"></div>  <div class="modalbuttons"></div> </div>'),this._tpl.button=jQuery('<div class="modalbutton"><input type="button" /></input></div>'),this._buttons={},this._args={closeClass:"modalclose",overlayId:"modaloverlay",overlayCss:{"background-color":"lightgrey",cursor:"wait"},containerId:"modalcontainer",containerCss:{"background-color":"white"},onClose:function(){this.close()},zIndex:80130}},{handleRequest:function(e,t){var n=this._tpl.modal.clone();n.find(".modaltitle").append(t.getTitle()),n.find(".modalmessage").append(t.getMessage());var r=t.getButtons(),i=n.find(".modalbuttons");for(var s in r){if(!r[s].name)continue;var o=r[s],u=this._tpl.button.clone(),a=u.find("input");a.attr("name",o.name),a.attr("text",o.text),a.attr("value",o.text),a.bind("click",o.onclick),o.close!==!1&&a.addClass(this._args.closeClass),i.append(u)}t.onshow&&(this._args.onShow=onshow),$.modal=n.modal(this._args)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/ModalDialogRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.event.ExtensionUpdatedEvent",function(e,t,n){this._creator=null,this._extension=e,this.viewstate=t,this.viewinfo=n},{__name:"userinterface.ExtensionUpdatedEvent",getName:function(){return this.__name},getExtension:function(){return this._extension},getViewState:function(){return this.viewstate},setViewState:function(e){this.viewstate=e},getViewInfo:function(){return this.viewinfo},setViewInfo:function(e){this.viewinfo=e}},{protocol:["Oskari.mapframework.event.Event"]}),define("bundles/framework/bundle/divmanazer/event/ExtensionUpdatedEvent",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Accordion",function(){this.template=jQuery('<div class="accordion"></div>'),this.templateMsg=jQuery('<div class="accordionmsg"></div>'),this.panels=[],this.ui=this.template.clone()},{addPanel:function(e){this.removeMessage(),this.panels.push(e),e.insertTo(this.ui)},removePanel:function(e){var t=null,n;for(n=0;n<this.panels.length;n+=1)if(this.panels[n]===e){t=this.panels[n],this.panels.splice(n,1);break}return t?(t.destroy(),!0):!1},removeAllPanels:function(){this.ui.empty(),this.panels=[]},removeMessage:function(){var e=this.ui.find("div.accordionmsg");e.length>0&&e.remove()},showMessage:function(e){this.removeMessage();var t=this.templateMsg.clone();t.append(e),this.ui.append(t)},showPanels:function(){var e=0;for(e=0;e<this.panels.length;e+=1)this.panels[e].setVisible(!0)},hidePanels:function(){var e=0;for(e=0;e<this.panels.length;e+=1)this.panels[e].setVisible(!1)},insertTo:function(e){e.append(this.ui)},getContainer:function(){return this.ui}}),define("bundles/framework/bundle/divmanazer/component/Accordion",function(){}),Oskari.clazz.define("Oskari.userinterface.component.AccordionPanel",function(){this.template=jQuery('<div class="accordion_panel"><div class="header"><div class="headerIcon icon-arrow-right"></div><div class="headerText"></div></div><div class="content"></div></div>'),this.title=null,this.content=null,this.html=this.template.clone();var e=this,t=e.html.find("div.header");t.click(function(){e.isOpen()?e.close():e.open()}),this.html.find("div.content").hide()},{setVisible:function(e){e===!0?this.html.show():this.html.hide()},isVisible:function(){return this.html.is(":visible")},isOpen:function(){return this.html.hasClass("open")},open:function(){this.html.addClass("open");var e=this.html.find("div.header div.headerIcon");e.removeClass("icon-arrow-right"),e.addClass("icon-arrow-down"),this.html.find("div.content").show()},close:function(){this.html.removeClass("open");var e=this.html.find("div.header div.headerIcon");e.removeClass("icon-arrow-down"),e.addClass("icon-arrow-right"),this.html.find("div.content").hide()},setTitle:function(e){this.title=e;var t=this.html.find("div.header div.headerText");t.html(this.title)},getTitle:function(){return this.title},setContent:function(e){this.content=e;var t=this.html.find("div.content");t.append(this.content)},destroy:function(){this.html.remove()},getContainer:function(){return this.html.find("div.content")},insertTo:function(e){e.append(this.html)}}),define("bundles/framework/bundle/divmanazer/component/AccordionPanel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabContainer",function(e){this.panels=[],this.tabChangeListeners=[],e?this.emptyMsg=e:this.emptyMsg="No content",this.template=jQuery('<div class="oskariTabs">'+this.emptyMsg+"</div>"),this.templateTabs=jQuery('<div class="tabsHeader"><ul></ul></div><br clear="all"/><div class="tabsContent"></div>'),this.ui=this.template.clone()},{addPanel:function(e){var t=this,n,r,i,s;this.panels.length===0&&(n=this.templateTabs.clone(),this.ui.html(n)),r=this.ui.find("ul"),i=e.getHeader(),r.append(i),e.insertTo(this.ui.find("div.tabsContent")),this.panels.push(e),this.panels.length===1&&this.select(e),s=i.find("a"),s.bind("click",function(){return t.select(e),!1})},addTabChangeListener:function(e){this.tabChangeListeners.push(e)},select:function(e){var t=null,n,r,i;for(n=0;n<this.panels.length;n+=1)if(this.isSelected(this.panels[n])){t=this.panels[n],t.handleSelection(!1);break}r=this.ui.find("ul"),r.find("li").removeClass("active"),i=this.ui.children().children("div.tab-content"),i.hide(),e.getHeader().addClass("active"),e.getContainer().show(),e.handleSelection(!0);for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](t,e)},isSelected:function(e){return e.getHeader().hasClass("active")},removePanel:function(e){var t=null,n;for(n=0;n<this.panels.length;n+=1)if(this.panels[n]===e){t=this.panels[n],this.panels.splice(n,1);break}if(this.panels.length===0){this.ui.html(this.emptyMsg);for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](e)}else this.select(this.panels[0]);return t?(t.destroy(),!0):!1},insertTo:function(e){e.append(this.ui)}}),define("bundles/framework/bundle/divmanazer/component/TabContainer",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabDropdownContainer",function(e){this.panels=[],this.tabChangeListeners=[],e?this.emptyMsg=e:this.emptyMsg="No content",this.template=jQuery('<div class="oskariTabs">'+this.emptyMsg+"</div>"),this.templateTabOption=jQuery("<option></option>"),this.templateTabs=jQuery('<div class="tabsHeader"><ul><li><select name="tabs"></select></li></ul></div><br clear="all"/><div class="tabsContent"></div>'),this.ui=this.template.clone()},{addPanel:function(e){var t=this,n,r,i;this.panels.length===0&&(n=this.templateTabs.clone(),this.ui.html(n)),r=this.ui.find("ul li select"),i=this.templateTabOption.clone(),i.append(e.getTitle()),r.append(i),e.setHeader(i),e.insertTo(this.ui.find("div.tabsContent")),this.panels.push(e),this.panels.length===1&&(this.select(e),r.bind("change",function(){t.select(t.panels[this.selectedIndex])}))},addTabChangeListener:function(e){this.tabChangeListeners.push(e)},select:function(e){var t=null,n,r,i,s,o;if(this.tabChangeListeners.length>0)for(n=0;n<this.panels.length;n+=1)if(this.isSelected(this.panels[n])){t=this.panels[n];break}r=this.ui.children().children("div.tab-content"),r.hide(),i=this.ui.find("ul li select"),s=i.find("option"),s.removeAttr("selected"),o=this._getPanelIndex(e),jQuery(s[o]).attr("selected","selected"),e.getContainer().show();for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](t,e)},isSelected:function(e){var t=this.ui.find("ul li select :selected");return t.index()===this._getPanelIndex(e)},_getPanelIndex:function(e){var t;for(t=0;t<this.panels.length;t+=1)if(this.panels[t]===e)return t;return-1},removePanel:function(e){var t=null,n;for(n=0;n<this.panels.length;n+=1)if(this.panels[n]===e){t=this.panels[n],this.panels.splice(n,1);break}if(this.panels.length===0){this.ui.html(this.emptyMsg);for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](e)}else this.select(this.panels[0]);return t?(t.destroy(),!0):!1},insertTo:function(e){e.append(this.ui)}}),define("bundles/framework/bundle/divmanazer/component/TabDropdownContainer",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabPanel",function(){this.template=jQuery('<div class="tab-content"></div>'),this.templateTabHeader=jQuery('<li><a href="JavaScript:void(0);"></a></li>'),this.title=null,this.content=null,this.header=null,this.selectionHandler=null,this.html=this.template.clone(),this.html.hide()},{setTitle:function(e){var t,n;this.title=e,t=this.templateTabHeader.clone(),this.header=t,n=t.find("a"),n.html(this.getTitle())},getTitle:function(){return this.title},setHeader:function(e){this.header=e},getHeader:function(){return this.header},setContent:function(e){this.content=e,this.html.html(this.content)},destroy:function(){this.header.remove(),this.html.remove()},getContainer:function(){return this.html},setSelectionHandler:function(e){this.selectionHandler=e},handleSelection:function(e){this.selectionHandler&&this.selectionHandler(e===!0)},insertTo:function(e){e.append(this.html)}}),define("bundles/framework/bundle/divmanazer/component/TabPanel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Badge",function(){this.compiledTemplates={},this.compileTemplates(),this.ui=null,this.container=null},{templates:{"default":'<span class="oskari-badge"></span>',success:'<span class="oskari-badge oskari-badge-success"></span>',warning:'<span class="oskari-badge oskari-badge-warning"></span>',important:'<span class="oskari-badge oskari-badge-important"></span>',info:'<span class="oskari-badge oskari-badge-info"></span>',inverse:'<span class="oskari-badge oskari-badge-inverse"></span>'},compileTemplates:function(){var e;for(e in this.templates)this.templates.hasOwnProperty(e)&&(this.compiledTemplates[e]=jQuery(this.templates[e]))},insertTo:function(e){this.container=e},setContent:function(e,t){this.ui&&(this.ui.remove(),this.ui=null);var n=this.compiledTemplates[t||"default"].clone();n.append(e),this.container.append(n),this.ui=n},hide:function(){this.ui&&(this.ui.remove(),this.ui=null)}}),define("bundles/framework/bundle/divmanazer/component/Badge",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Alert",function(){this.compiledTemplates={},this.compileTemplates(),this.ui=null,this.container=null},{templates:{"default":'<div class="oskari-alert"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',success:'<div class="oskari-alert oskari-alert-success"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',error:'<div class="oskari-alert oskari-alert-error"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',info:'<div class="oskari-alert oskari-alert-info"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>'},compileTemplates:function(){var e;for(e in this.templates)this.templates.hasOwnProperty(e)&&(this.compiledTemplates[e]=jQuery(this.templates[e]))},insertTo:function(e){this.container=e},setContent:function(e,t,n){this.ui&&(this.ui.remove(),this.ui=null);var r=this,i=r.compiledTemplates[t||"default"].clone(),s=!n;i.append(e),r.container.prepend(i),r.ui=i,s?i.children(".oskari-alert-icon-close").click(function(){r.hide()}):i.children(".oskari-alert-icon-close").remove()},hide:function(){this.ui&&(this.ui.remove(),this.ui=null)}}),define("bundles/framework/bundle/divmanazer/component/Alert",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Popup",function(){this.template=jQuery('<div class="divmanazerpopup"><h3></h3><div class="content"></div><div class="actions"></div></div>'),this.templateButton=jQuery('<div class="button"><a href="JavaScript:void(0);"></a></div>'),this.dialog=this.template.clone(),this.overlay=null},{show:function(e,t,n){var r=this,i=this.dialog.find("div.content"),s,o,u,a;this.dialog.find("h3").html(e),i.html(t);if(n&&n.length>0){s=this.dialog.find("div.actions"),s.empty();for(o=0;o<n.length;o+=1)n[o].insertTo(s)}else this.dialog.bind("click",function(){r.close(!0)});jQuery("body").append(this.dialog),u=i.height(),a=jQuery(document).height()*.6,u>a&&(i.height(a),i.css("overflow-y","auto")),this.dialog.css("margin-left",-(this.dialog.width()/2)+"px"),this.dialog.css("margin-top",-(this.dialog.height()/2)+"px")},fadeout:function(e){var t=this,n=3e3;e&&(n=e),setTimeout(function(){t.close()},n)},addClass:function(e){this.dialog.addClass(e)},createCloseButton:function(e){var t=this,n=Oskari.clazz.create("Oskari.userinterface.component.Button");return n.setTitle(e),n.setHandler(function(){t.close(!0)}),n},close:function(e){var t=this;this.overlay&&this.overlay.close(),e?t.dialog.remove():(t.dialog.animate({opacity:0},500),setTimeout(function(){t.dialog.remove()},500))},alignment:["left","right","top","bottom"],moveTo:function(e,t){var n=this,r="right",i=jQuery(e),s=i.offset(),o=i.outerWidth(),u=i.outerHeight(),a=n.dialog.outerWidth(),f=n.dialog.outerHeight(),l=s.left,c=s.top;t&&jQuery.inArray(t,this.alignment)!==-1&&(r=t),r==="right"?(l=l+o+5,c=c+u/2-f/2):r==="left"?(l=l-a-5,c=c+u/2-f/2):r==="top"?(c=c-f-5,l=l+o/2-a/2):r==="bottom"&&(c=c+u+5,l=l+o/2-a/2),l<0&&(l=0),c<0&&(c=0),n.dialog.addClass("arrow"),n.dialog.addClass(t),n.dialog.css({left:l+"px",top:c+"px","margin-left":0,"margin-top":0})},resetPosition:function(){var e;this.dialog.removeClass("arrow");for(e=0;e<this.alignment.length;e+=1)this.dialog.removeClass(this.alignment[e]);this.dialog.removeAttr("style")},makeModal:function(){var e=Oskari.clazz.create("Oskari.userinterface.component.Overlay");e.overlay("body"),this.overlay=e,e.followResizing(!0)},setContent:function(e){var t=this.dialog.find("div.content");t.empty(),t.append(e)},getContent:function(){return this.dialog.find("div.content")[0].textContent},getJqueryContent:function(){return this.dialog.find("div.content")},makeDraggable:function(){var e=this;e.dialog.css("position","absolute"),e.dialog.draggable({scroll:!1})}}),define("bundles/framework/bundle/divmanazer/component/Popup",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Overlay",function(){this.template=jQuery('<div class="oskarioverlay transparent"></div>'),this._overlay=null,this._targetSelector=null,this._resizingWorkaround=null},{overlay:function(e){var t=this,n;t._overlay=this.template.clone(),t._targetSelector=e,this._targetSelector||(this._targetSelector="body"),n=jQuery(this._targetSelector),n.append(this._overlay),t._setupSizeAndLocation(),t._overlay.bind("click",function(e){e.preventDefault()})},_setupSizeAndLocation:function(){var e=this,t=jQuery(this._targetSelector);e._overlay.css({left:"0px",top:"0px",width:t.width()+"px",height:t.height()+"px"})},resize:function(){var e=jQuery(this._targetSelector);this._overlay.height(e.height()),this._overlay.width(e.width())},followResizing:function(e){var t=this;e?jQuery(window).resize(function(){t.resize()}):this._resizingWorkaround=setTimeout(function(){t.resize(),t.followResizing()},500)},close:function(){this._overlay.remove(),this._resizingWorkaround&&clearTimeout(this._resizingWorkaround)},bindClickToClose:function(){var e=this;e._overlay.bind("click",function(){e.close()})}}),define("bundles/framework/bundle/divmanazer/component/Overlay",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Button",function(){this.template=jQuery('<input type="button"/>'),this.title=null,this.ui=this.template.clone(),this.handler=null},{setTitle:function(e){this.title=e,this.ui&&this.ui.attr("value",e)},addClass:function(e){this.ui.addClass(e)},setEnabled:function(e){e===!0?this.ui.removeAttr("disabled"):this.ui.attr("disabled","disabled")},getTitle:function(){return this.title},setHandler:function(e){this.handler&&this.ui.unbind("click",this.handler),this.handler=e,this.ui.bind("click",this.handler)},destroy:function(){this.ui.remove()},insertTo:function(e){e.append(this.ui)},getButton:function(){return this.ui}}),define("bundles/framework/bundle/divmanazer/component/Button",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Form",function(){this.template=jQuery('<div class="oskariform"></div>'),this._form=this.template.clone(),this.fields=[]},{addField:function(e){this.fields.push(e)},getForm:function(e){var t;this._form=this.template.clone();for(t=0;t<this.fields.length;t+=1)this._form.append(this.fields[t].getField());return this._form},validate:function(e){var t=[],n;for(n=0;n<this.fields.length;n+=1)t=t.concat(this.fields[n].validate());return t},showErrors:function(){var e,t;for(e=0;e<this.fields.length;e+=1)t=this.fields[e].validate(),this.fields[e].showErrors(t)},clearErrors:function(){var e;for(e=0;e<this.fields.length;e+=1)this.fields[e].clearErrors()}}),define("bundles/framework/bundle/divmanazer/component/Form",function(){}),Oskari.clazz.define("Oskari.userinterface.component.UIHelper",function(e){this.sandbox=e},{processHelpLinks:function(e,t,n,r){if(!t)return;var i=this,s;s=function(t){return function(i,s){var o=Oskari.clazz.create("Oskari.userinterface.component.Popup"),u=o.createCloseButton("OK");u.addClass("primary"),i?(o.show(e,s.static,[u]),o.moveTo(t,"bottom")):o.show(n,r,[u])}},t.find("[helptags]").each(function(e,t){var n=jQuery(t),r=n.attr("helptags");n.bind("click",function(){i.getHelpArticle(r,s(n))})})},getHelpArticle:function(e,t){var n=this;jQuery.ajax({url:n.sandbox.getAjaxUrl()+"action_route=GetArticlesByTag",data:{tags:e},type:"GET",dataType:"json",beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},success:function(e){e&&e.articles[0]&&e.articles[0].content?t(!0,e.articles[0].content):t(!1)},error:function(){t(!1)}})}}),define("bundles/framework/bundle/divmanazer/component/UIHelper",function(){}),Oskari.clazz.define("Oskari.userinterface.component.FormInput",function(e,t){var n=t||Oskari.getSandbox(),r,i;this.sandbox=n,this.template=jQuery('<div class="oskarifield"><label></label><input type="text" autofocus/></div>'),this.templateErrors=jQuery('<div class="error"></div>'),this.templateTooltip=jQuery('<div class="icon-info"></div>'),this.templateClearButton=jQuery('<div class="icon-close" style="margin-left: 0px; position: relative; display: inline-block; left: -20px; top: 3px;"></div>'),this._field=this.template.clone(),r=this._field.find("label"),r.attr("for",e),i=this._field.find("input").focus(),i.attr("name",e),this._name=e,this._validator=null,this._required=!1,this._requiredMsg="required",this._contentCheck=!1,this._contentCheckMsg="illegal characters",this._bindFocusAndBlur(),this._regExp=/[\s\w\d\.\,\?\!\-äöåÄÖÅ]*/,this._colorRegExp=/^([A-Fa-f0-9]{6})$/},{setLabel:function(e){var t=this._field.find("label");t.html(e)},setTooltip:function(e,t){var n=this.templateTooltip.clone(),r;n.attr("title",e),t&&(n.addClass("help"),n.attr("helptags",t)),r=this._field.find("label"),r.before(n)},setPlaceholder:function(e){var t=this._field.find("input");t.attr("placeholder",e)},setRequired:function(e,t){this._required=e===!0,t&&(this._requiredMsg=t)},setContentCheck:function(e,t,n){this._contentCheck=e===!0,n&&(this._regExp=n),t&&(this._contentCheckMsg=t)},showErrors:function(e){this.clearErrors();var t=this.templateErrors.clone(),n;for(n=0;n<e.length;n+=1)t.append(e[n].error+"<br/>");this._field.append(t)},clearErrors:function(){var e=this._field.find("div.error");e.remove()},getField:function(){return this._field},getValue:function(e){var t=this._field.find("input").val();return e&&(t=t.match(this._regExp)),t},setValue:function(e){this._field.find("input").attr("value",e)},getName:function(){return this._name},setEnabled:function(e){e===!0?this._field.find("input").removeAttr("disabled"):this._field.find("input").attr("disabled","disabled")},setRegExp:function(e){this._regExp=e},setValidator:function(e){this._validator=e},validate:function(){var e=[],t;return this._validator&&(e=this._validator(this)),t=this.getValue(),this._required&&(this.checkLength(t,1)||e.push({field:this.getName(),error:this._requiredMsg})),this._contentCheck&&(this.checkValue()||e.push({field:this.getName(),error:this._contentCheckMsg})),e},checkLength:function(e,t,n){if(e){var r=jQuery.trim(e.toString());return t&&r.length<t?!1:n&&r.length>n?!1:!0}return!1},checkValue:function(){var e=this.getValue(),t=this.getValue(!0);return e===t},validateNumberRange:function(e,t,n){return isNaN(parseInt(e,10))?!1:isFinite(e)?e<t||e>n?!1:!0:!1},validateHexColor:function(e){return this._colorRegExp.test(e)},bindEnterKey:function(e){var t=this,n=this._field.find("input");n.keypress(function(n){t._isEnterPress(n)&&e(n)})},bindUpKey:function(e){var t=this,n=this._field.find("input");n.keydown(function(n){t._isUpPress(n)&&(n.preventDefault(),e(n))})},bindDownKey:function(e){var t=this,n=this._field.find("input");n.keydown(function(n){t._isDownPress(n)&&(n.preventDefault(),e(n))})},bindOnBlur:function(e){var t=this._field.find("input");t.blur(function(){e()})},bindChange:function(e,t){var n=this._field.find("input");t?n.keyup(e):n.on("change",e)},addClearButton:function(){var e=this.templateClearButton.clone(),t=this._field.find("input");e.bind("click",function(){t.val(""),t.trigger("change"),t.trigger("keyup")}),t.after(e)},_bindFocusAndBlur:function(){var e=this.sandbox,t,n,r;if(!e)return;t=e.getRequestBuilder("EnableMapKeyboardMovementRequest"),n=e.getRequestBuilder("DisableMapKeyboardMovementRequest");if(!t||!n)return;r=this._field.find("input"),r.focus(function(){e.postRequestByName("DisableMapKeyboardMovementRequest")}),r.blur(function(){e.postRequestByName("EnableMapKeyboardMovementRequest")})},_isEnterPress:function(e){var t=e.which;return t===13},_isDownPress:function(e){var t=e.which;return t===40},_isUpPress:function(e){var t=e.which;return t===38}}),define("bundles/framework/bundle/divmanazer/component/FormInput",function(){}),!function(e){var t=function(e,t){this.init("oskariTooltip",e,t)},n=function(e,t){this.init("oskariPopover",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!=="manual"&&(i=this.options.trigger==="hover"?"mouseenter":"focus",s=this.options.trigger==="hover"?"mouseleave":"blur",this.$element.on(i,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState==="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.hide)return n.hide();clearTimeout(this.timeout),n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState==="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=this.options.placement.apply(this.options.scope),t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},isHTML:function(e){return typeof e!="string"||e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".oskari-tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function n(){var n=setTimeout(function(){t.off(e.support.transition.end).remove()},500);t.one(e.support.transition.end,function(){clearTimeout(n),t.remove()})}var t=this.tip();t.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n():t.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){return this.options.title.apply(this.options.scope)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},attach:function(e){this.$element=e}},e.fn.oskariTooltip=function(n){return this.each(function(){var r=e(this),i=r.data("oskariTooltip"),s=typeof n=="object"&&n;i||r.data("oskariTooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.oskariTooltip.Constructor=t,e.fn.oskariTooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="oskari-tooltip"><div class="oskari-tooltip-arrow"></div><div class="oskari-tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0},n.prototype=e.extend({},e.fn.oskariTooltip.Constructor.prototype,{constructor:n,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".oskari-popover-title")[this.isHTML(t)?"html":"text"](t),e.find(".oskari-popover-content > *")[this.isHTML(n)?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){return this.options.content.apply(this.options.scope)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip}}),e.fn.oskariPopover=function(t){return this.each(function(){var r=e(this),i=r.data("oskariPopover"),s=typeof t=="object"&&t;i||r.data("oskariPopover",i=new n(this,s)),typeof t=="string"&&i[t]()})},e.fn.oskariPopover.Constructor=n,e.fn.oskariPopover.defaults=e.extend({},e.fn.oskariTooltip.defaults,{placement:"right",content:"",template:'<div class="oskari-popover"><div class="oskari-arrow"></div><div class="oskari-popover-inner"><h3 class="oskari-popover-title"></h3><div class="oskari-popover-content"><p></p></div></div></div>'}),Oskari.clazz.define("Oskari.userinterface.component.Popover",function(e,t){this.title=e,this.content=t,this.$container=null,this.data=null,this.shown=!1,this.placement="bottom"},{templates:{container:'<div class="oskari-popover-container"/>'},hide:function(){if(!this.shown)return;this.shown=!1;if(!this.data)return;this.data.hide()},show:function(){if(this.shown)return;if(!this.data)return;this.data.show(),this.shown=!0},attachTo:function(t){var r=this;r.$container=e(t),r.data?r.data.attach(r.$container):r.data=new n(t,{scope:r,title:r.getTitle,content:r.getContent,trigger:"manual",placement:r.getPlacement}),r.$container.data("oskariPopover",r.data)},getTitle:function(){return this.title},getContent:function(){return this.content},setContent:function(e,t){var n=this;n.hide(),n.content=e,t&&(n.title=t),n.show()},setTitle:function(e,t){var n=this;n.hide(),n.title=e,t&&(n.content=t),n.show()},setPlacement:function(e){this.placement=e},getPlacement:function(){return this.placement}})}(window.jQuery),define("bundles/framework/bundle/divmanazer/component/Popover",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Grid",function(e){this.model=null;var t="";typeof e!="undefined"&&(t=e),this.template=jQuery('<table class="oskari-grid"><thead><tr></tr></thead><tbody></tbody></table>'),this.templateTableHeader=jQuery('<th><a href="JavaScript:void(0);"></a></th>'),this.templateDiv=jQuery("<div></div>"),this.templateRow=jQuery("<tr></tr>"),this.templateCell=jQuery("<td></td>"),this.templatePopupLink=jQuery('<a href="JavaScript: void(0);"></a>'),this.templateColumnSelectorButtonWrapper=jQuery("<div/>",{}),this.templateColumnSelectorButton=jQuery("<div/>",{title:t}),this.templateColumnSelector=jQuery("<div/>",{}),this.templateColumnSelectorList=jQuery("<ul/>",{}),this.templateColumnSelectorListItem=jQuery('<li><div><input type="checkbox"/><label></label></div></li>'),this.templateColumnSelectorClose=jQuery('<div class="icon-close close-selector-button"></div>'),this.table=null,this.fieldNames=[],this.selectionListeners=[],this.additionalDataHandler=null,this.visibleColumnSelector=null,this.showColumnSelector=!1,this.resizableColumns=!1,this.uiNames={},this.valueRenderer={},this.lastSort=null},{setDataModel:function(e){this.model=e},getDataModel:function(){return this.model},setColumnSelector:function(e){this.showColumnSelector=e},setResizableColumns:function(e){this.resizableColumns=e},setColumnUIName:function(e,t){this.uiNames[e]=t},setColumnValueRenderer:function(e,t){this.valueRenderer[e]=t},setVisibleFields:function(e){this.fieldNames=e},addSelectionListener:function(e){this.selectionListeners.push(e)},setAdditionalDataHandler:function(e,t){this.additionalDataHandler={title:e,handler:t}},_createAdditionalDataField:function(e){var t=this,n=this._renderAdditionalData(e),r;return!e.size&&this.additionalDataHandler?(r=this.templatePopupLink.clone(),r.append(this.additionalDataHandler.title),r.bind("click",function(){return t.additionalDataHandler.handler(r,n),!1}),r):n},_renderAdditionalData:function(e){var t=this.template.clone(),n=t.find("tbody"),r,i,s,o,u,a,f,l;if(e.size){r="";for(f=0;f<e.size();f+=1)f!==0&&(r+=", "),r+=e[f];return r}if(jQuery.isArray(e)){var c=this.templateDiv.clone();for(var f=0;f<e.length;++f){var a=this._renderAdditionalData(e[f]);c.append(a)}return c}for(l in e)if(e.hasOwnProperty(l)){i=this.templateRow.clone(),s=this.templateCell.clone(),o=this.templateCell.clone(),r=e[l],s.append(l),i.append(s);try{u=typeof r,u==="object"?(a=this._renderAdditionalData(r),o.append(a)):u!=="function"&&o.append(r),i.append(o)}catch(h){}n.append(i)}return t},_renderHeader:function(e,t){var n=this,r=e.find("thead tr"),i=e.find("tbody"),s,o,u,a,f,l;l=function(s){return function(){var o=jQuery(this),u=n.getSelection(),a=!1,f,l;i.empty(),n.lastSort&&n.lastSort.attr===s&&(a=!n.lastSort.descending),n._sortBy(s,a),n._renderBody(e,t),r.find("th").removeClass("asc"),r.find("th").removeClass("desc"),a?o.parent().addClass("desc"):o.parent().addClass("asc"),f=n.model.getIdField();for(l=0;l<u.length;l+=1)n.select(u[l][f],!0);return!1}};for(s=0;s<t.length;s+=1)o=this.templateTableHeader.clone(),u=o.find("a"),a=t[s],f=this.uiNames[a],f||(f=a),u.append(f),n.lastSort&&a===n.lastSort.attr&&(n.lastSort.descending?o.addClass("desc"):o.addClass("asc")),u.bind("click",l(t[s])),r.append(o)},_renderBody:function(e,t){var n=this,r=e.find("tbody"),i=this.model.getData(),s,o,u,a,f,l,c,h,p,d;for(s=0;s<i.length;s+=1){o=this.templateRow.clone(),u=i[s],o.attr("data-id",u[this.model.getIdField()]);for(a=0;a<t.length;a+=1)f=t[a],l=u[f],c=this.templateCell.clone(),typeof l=="object"?c.append(this._createAdditionalDataField(l)):(h=this.valueRenderer[f],h&&(l=h(l,u)),c.append(l)),o.append(c);r.append(o)}p=e.find("tbody tr"),d=function(){n._dataSelected(jQuery(this).attr("data-id"))},p.bind("click",d),p.find("a").hover(function(){jQuery(this).parents("tr").unbind("click")},function(){jQuery(this).parents("tr").bind("click",d)})},_renderColumnSelector:function(e,t){this.visibleColumnSelector=this.templateColumnSelectorButtonWrapper.clone();var n=this,r=this.templateColumnSelectorButton.clone(),i=this.templateColumnSelector.clone(),s=this.templateColumnSelectorList.clone(),o=this.templateColumnSelectorClose.clone(),u,a,f,l,c,h;this.visibleColumnSelector.addClass("column-selector-placeholder"),r.addClass("icon-menu"),i.addClass("column-selector"),this.visibleColumnSelector.append(r),this.visibleColumnSelector.append(i),jQuery("input.column-selector-list-item").remove(),r.click(function(){i.css("visibility")!=="hidden"?i.css("visibility","hidden"):i.css("visibility","visible")}),o.click(function(e){e.stopPropagation(),i.css("visibility","hidden")}),u=this.model.getFields();for(f=0;f<u.length;f+=1){a=!1;for(l=0;l<t.length;l+=1)if(u[f]===t[l]){a=!0;break}c=this.templateColumnSelectorListItem.clone(),c.addClass("column-selector-list-item"),h=c.find("input"),h.attr("checked",a),h.addClass("column-selector-list-item"),h.attr("id",u[f]),c.find("label").attr({"for":u[f],"class":"column-label"}).html(u[f]),c.css({margin:"5px"}),h.change(function(){var e=jQuery("input.column-selector-list-item"),t=n.model.getFields(),r=[],i,s;for(i=0;i<t.length;i+=1)for(s=0;s<e.length;s+=1)if(t[i]===e[s].id){e[s].checked&&r.push(t[i]);break}r.length>0&&n.setVisibleFields(r),n.renderTo(n.visibleColumnSelector.parent(),{columnSelector:"open"})}),s.append(c)}s.attr("class","column-selector-list"),i.append(s,o),o.click(function(e){e.stopPropagation(),i.css("visibility","hidden")})},_enableColumnResizer:function(){var e=!1,t,n,r,i=jQuery("table.oskari-grid th");i.css("cursor","e-resize"),i.mousedown(function(i){t=jQuery(this),e=!0,n=i.pageX,r=jQuery(this).width(),jQuery(t).addClass("resizing"),jQuery(document).attr("unselectable","on").css("user-select","none").on("selectstart",!1)}),jQuery(document).mousemove(function(i){e&&jQuery(t).width(r+(i.pageX-n))}),jQuery(document).mouseup(function(){e&&(jQuery(t).removeClass("resizing"),e=!1)})},renderTo:function(e,t){e.empty();var n=this.fieldNames,r=this.template.clone();n.length===0&&(n=this.model.getFields()),this.table=r,this._renderHeader(r,n),this.lastSort&&this._sortBy(this.lastSort.attr,this.lastSort.descending),this._renderBody(r,n),this.showColumnSelector&&(this._renderColumnSelector(r,n),e.append(this.visibleColumnSelector),t!==null&&typeof t!="undefined"&&t.columnSelector==="open"&&this.visibleColumnSelector.find(".column-selector").css("visibility","visible")),e.append(r),this.resizableColumns&&this._enableColumnResizer()},_dataSelected:function(e){var t;for(t=0;t<this.selectionListeners.length;t+=1)this.selectionListeners[t](this,e)},select:function(e,t){var n=this.model.getIdField(),r=this.model.getData(),i,s,o;for(i=0;i<r.length;i+=1){o=r[i];if(o[n]===e)break}s=this.table.find("tbody tr"),t!==!0&&s.removeClass("selected"),jQuery(s[i]).addClass("selected")},removeSelections:function(){var e=this.table.find("tbody tr");e.removeClass("selected")},getSelection:function(){var e=this.model.getData(),t=[],n=this.table.find("tbody tr"),r,i;for(r=0;r<n.length;r+=1)i=jQuery(n[r]),i.hasClass("selected")&&t.push(e[r]);return t},getTable:function(){return this.table},_sortBy:function(e,t){var n=this,r=n.model.getData();if(r.length===0)return;this.lastSort={attr:e,descending:t},r.sort(function(r,i){return n._sortComparator(r,i,e,t)})},_sortComparator:function(e,t,n,r){var i,s,o;return typeof e[n]=="object"||typeof t[n]=="object"?0:(i=e[n],i?i.toLowerCase&&(i=i.toLowerCase()):i="",s=t[n],s?s.toLowerCase&&(s=s.toLowerCase()):s="",o=0,i<s?o=-1:i>s&&(o=1),r&&(o*=-1),o)}}),define("bundles/framework/bundle/divmanazer/component/Grid",function(){}),Oskari.clazz.define("Oskari.userinterface.component.GridModel",function(){this.fields=[],this.data=[],this.idField=null},{_addField:function(e){this.idField||(this.idField=e),this.fields.push(e)},getFields:function(){return this.fields},setIdField:function(e){this.idField=e},getIdField:function(){return this.idField},addData:function(e){var t;if(this.fields.length===0)for(t in e)e.hasOwnProperty(t)&&this._addField(t);this.data.push(e)},getData:function(){return this.data}}),define("bundles/framework/bundle/divmanazer/component/GridModel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.ProgressSpinner",function(){this.container=undefined,this.opts=undefined},{__opts:{lines:15,length:0,width:5,radius:16,corners:0,rotate:0,color:"#000",speed:.6,trail:59,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},insertTo:function(e,t){this.container=e,this.opts=t||this.__opts},start:function(){var e=this.container,t=$(e),n=t.data(),r=this._Spinner,i=this.opts;n.spinner&&(n.spinner.stop(),delete n.spinner),i!==!1&&(n.spinner=(new r($.extend({color:t.css("color")},i))).spin(t.get()[0]))},stop:function(){var e=this.container,t,n;if(!e)return;t=$(e),n=t.data(),n.spinner&&(n.spinner.stop(),delete n.spinner)},_Spinner:function(e,t){function u(e,n){var r=t.createElement(e||"div"),i;for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}function a(e){var t,n;for(t=1,n=arguments.length;t<n;t+=1)e.appendChild(arguments[t]);return e}function f(e,t,n,o){var u=["opacity",t,~~(e*100),n,o].join("-"),a=.01+n/o*100,f=Math.max(1-(1-e)/t*(100-a),e),l=i.substring(0,i.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return r[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),r[u]=1),u}function l(e,t){var r=e.style,i,s;if(r[t]!==undefined)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(s=0;s<n.length;s+=1){i=n[s]+t;if(r[i]!==undefined)return i}}function c(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.style[l(e,n)||n]=t[n]);return e}function h(e){var t,n,r;for(r=1;r<arguments.length;r+=1){t=arguments[r];for(n in t)t.hasOwnProperty(n)&&e[n]===undefined&&(e[n]=t[n])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function d(e){if(!this.spin)return new d(e);this.opts=h(e||{},d.defaults,o)}var n=["webkit","Moz","ms","O"],r={},i,s,o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};return s=function(){var e=u("style",{type:"text/css"});return a(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d.defaults={},h(d.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(u(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width,o,a,f,l,h,d,v;return e&&(e.insertBefore(r,e.firstChild||null),a=p(e),o=p(r),c(r,{left:(n.left==="auto"?a.x-o.x+(e.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:(n.top==="auto"?a.y-o.y+(e.offsetHeight>>1):parseInt(n.top,10)+s)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts),i||(f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines,function m(){var e,i;f+=1;for(e=n.lines;e;e-=1)i=Math.max(1-(f+e*v)%h*d,n.opacity),t.opacity(r,n.lines-e,i,n);t.timeout=t.el&&setTimeout(m,~~(1e3/l))}()),t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function s(e,r){return c(u(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var n,r;for(n=0;n<t.lines;n+=1)r=c(u(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:i&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&a(r,c(s("#000","0 0 4px #000"),{top:"2px"})),a(e,a(r,s(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return u("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(u("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(s.addRule(".spin-vml","behavior:url(#default#VML)"),d.prototype.lines=function(t,n){function f(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,s){a(o,a(c(f(),{rotation:360/n.lines*t+"deg",left:~~i}),a(c(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,s,o,u;s=-(n.width+n.length)*2+"px",o=c(f(),{position:"absolute",top:s,left:s});if(n.shadow)for(u=1;u<=n.lines;u+=1)l(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=n.lines;u+=1)l(u);return a(t,o)},d.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):i=l(t,"animation")}(),d}(window,document)}),define("bundles/framework/bundle/divmanazer/component/ProgressSpinner",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultTile",function(e,t){this.locale=t,this.instance=e,this.container=null,this.template=null},{getName:function(){return"Oskari.userinterface.extension.DefaultTile"},setEl:function(e,t,n){this.container=$(e)},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},getOptions:function(){},setState:function(e){this.state=e},getState:function(e){return this.state}},{protocol:["Oskari.userinterface.Tile"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultTile",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultFlyout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultFlyout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultFlyout",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.EnhancedFlyout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultFlyout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale?this.locale:this.instance?this.instance.getLocalization().flyout:undefined},getSandbox:function(){return this.instance.getSandbox()},getExtension:function(){return this.instance},slicer:Array.prototype.slice,issue:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getRequestBuilder(e),r=n.apply(n,t);return this.getSandbox().request(this.getExtension(),r)},notify:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getEventBuilder(e),r=n.apply(n,t);return this.getSandbox().notifyAll(r)}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/divmanazer/extension/EnhancedFlyout",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultExtension",function(e,t,n,r){this.sandbox=null,this.plugins={},this._localization=null,this.conf={name:e,tileClazz:n||"Oskari.userinterface.extension.DefaultTile",flyoutClazz:t||"Oskari.userinterface.extension.DefaultFlyout",viewClazz:r}},{getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},getSandbox:function(){return this.sandbox},update:function(){},getLocalization:function(e){return this._localization||(this._localization=Oskari.getLocalization(this.getName())),e?this._localization[e]:this._localization},start:function(){var e=this,t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n),i;e.sandbox=r,r.register(this),t&&t.stateful===!0&&r.registerAsStateful(this.mediator.bundleId,this),i=r.getRequestBuilder("userinterface.AddExtensionRequest")(this),r.request(this,i)},stop:function(){var e=this.sandbox,t=e.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);e.request(this,t),e.unregisterStateful(this.mediator.bundleId),e.unregister(this),this.sandbox=null,this.started=!1},startExtension:function(){var e=this,t=e.sandbox,n,r,i,s;for(n in e.eventHandlers)e.eventHandlers.hasOwnProperty(n)&&t.registerForEventByName(e,n);r=e.getLocalization("flyout"),r&&e.conf.flyoutClazz&&(e.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create(e.conf.flyoutClazz,e,r)),i=e.getLocalization("tile"),i&&e.conf.tileClazz&&(e.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create(e.conf.tileClazz,e,i)),s=e.getLocalization("view"),s&&e.conf.viewClazz&&(e.plugins["Oskari.userinterface.View"]=Oskari.clazz.create(e.conf.viewClazz,e,s))},stopExtension:function(){var e=this,t=e.sandbox,n,r;for(n in e.eventHandlers)e.eventHandlers.hasOwnProperty(n)&&t.unregisterFromEventByName(e,n);for(r in e.plugins)e.plugins.hasOwnProperty(r)&&r&&(e.plugins[r]=null)},getPlugins:function(){return this.plugins},init:function(){return null},getName:function(){return this.conf.name},getConfiguration:function(){return this.conf},eventHandlers:{},onEvent:function(e){var t=this,n=t.eventHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},getLang:function(){return Oskari.getLang()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultExtension",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.EnhancedExtension",function(e,t){this.sandbox=null,this.plugins={},this._localization=t,this.conf={name:e}},{getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},getSandbox:function(){return this.sandbox},update:function(){},setLocalization:function(e){this._localization=e},getLocalization:function(e){return this._localization||(this._localization=Oskari.getLocalization(this.getName())),e?this._localization[e]:this._localization},start:function(){var e=this,t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n);e.sandbox=r,r.register(this),t&&t.stateful===!0&&r.registerAsStateful(this.mediator.bundleId,this);var i=r.getRequestBuilder("userinterface.AddExtensionRequest")(this);r.request(this,i)},stop:function(){var e=this.sandbox,t=e.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);e.request(this,t),e.unregisterStateful(this.mediator.bundleId),e.unregister(this),this.sandbox=null,this.started=!1},startExtension:function(){var e=this,t=e.sandbox;e.startPlugin();for(p in e.requestHandlers)t.addRequestHandler(p,this);for(p in e.eventHandlers)t.registerForEventByName(e,p)},startPlugin:function(){console.log("BASECLASS startPlugin called ",this)},stopPlugin:function(){console.log("BASECLASS stopPlugin called ",this)},stopExtension:function(){var e=this,t=e.sandbox;for(p in e.eventHandlers)t.unregisterFromEventByName(e,p);for(p in e.requestHandlers)t.removeRequestHandler(p,this);this.stopPlugin()},getPlugins:function(){return this.plugins},init:function(){return null},getName:function(){return this.conf.name},getConfiguration:function(){return this.conf},eventHandlers:{},requestHandlers:{},onEvent:function(e){var t=this,n=t.eventHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},handleRequest:function(e,t){return this.onRequest(t)},onRequest:function(e){var t=this,n=t.requestHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},getLang:function(){return Oskari.getLang()},getTile:function(){return this.plugins["Oskari.userinterface.Tile"]},setTile:function(e){this.plugins["Oskari.userinterface.Tile"]=e},setDefaultTile:function(e){var t=Oskari.cls().extend("Oskari.userinterface.extension.DefaultTile"),n=t.create(this,{title:e||""});return this.plugins["Oskari.userinterface.Tile"]=n,n},getFlyout:function(){return this.plugins["Oskari.userinterface.Flyout"]},setFlyout:function(e){this.plugins["Oskari.userinterface.Flyout"]=e},slicer:Array.prototype.slice,notify:function(e,t){return this.getSandbox().notifyAll(e,t)},request:function(e){return this.getSandbox().request(this,e)},issue:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getRequestBuilder(e),r=n.apply(n,t);return this.getSandbox().request(this.getExtension(),r)},notify:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getEventBuilder(e),r=n.apply(n,t);return this.getSandbox().notifyAll(r)}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension","Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/extension/EnhancedExtension",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultView",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultView"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.View"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultView",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultLayout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultLayout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.Layout"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultLayout",function(){}),define("normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n,i){t=r(t),n=r(n);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,u,a,e;while(u=s.exec(e)){a=u[3]||u[2]||u[5]||u[6]||u[4];var f;i&&a.substr(0,1)=="/"?f=i+a:f=o(a,t,n);var l=u[5]||u[6]?1:0;e=e.substr(0,s.lastIndex-a.length-l-1)+f+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(f.length-a.length)}return e};return f.convertURIBase=o,f}),define("css",["./normalize"],function(e){function t(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}if(typeof window=="undefined")return{load:function(e,t,n){n()}};var n=!1,r=document.getElementsByTagName("head")[0],i=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),s=!1;!i||(i[1]||i[7]?(s=parseInt(i[1])<6||parseInt(i[7])<=9,i="trident"):i[2]?(s=!0,i="webkit"):i[3]||(i[4]?(s=parseInt(i[4])<18,i="gecko"):n&&alert("Engine detection failed")));var o={},u=/^\/|([^\:\/]*:)/;o.pluginBuilder="./css-builder";var a=[],f={},l=[];o.addBuffer=function(e){if(t(a,e)!=-1)return;if(t(l,e)!=-1)return;a.push(e),l.push(e)},o.setBuffer=function(t,n){var r=window.location.pathname.split("/");r.pop(),r=r.join("/")+"/";var i=require.toUrl("base_url").split("/");i.pop();var s=i.join("/")+"/";s=e.convertURIBase(s,r,"/"),s.match(u)||(s="/"+s),s.substr(s.length-1,1)!="/"&&(s+="/"),o.inject(e(t,s,r));for(var l=0;l<a.length;l++)(n&&a[l].substr(a[l].length-5,5)==".less"||!n&&a[l].substr(a[l].length-4,4)==".css")&&(function(e){f[e]=f[e]||!0,setTimeout(function(){typeof f[e]=="function"&&f[e](),delete f[e]},7)}(a[l]),a.splice(l--,1))},o.attachBuffer=function(e,n){for(var r=0;r<a.length;r++)if(a[r]==e)return f[e]=n,!0;if(f[e]===!0)return f[e]=n,!0;if(t(l,e)!=-1)return n(),!0};var c=function(e,t){setTimeout(function(){for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.href==e.href)return t()}c(e,t)},10)},h=function(e,t){setTimeout(function(){try{return e.sheet.cssRules,t()}catch(n){}h(e,t)},10)};if(i=="trident"&&s)var p=[],d=[],v=0,m=function(e,t){var n;d.push({url:e,cb:t}),n=p.shift(),!n&&v++<31&&(n=document.createElement("style"),r.appendChild(n)),n&&g(n)},g=function(e){var t=d.shift();if(!t){e.onload=b,p.push(e);return}e.onload=function(){t.cb(t.ss),g(e)};var n=e.styleSheet;t.ss=n.imports[n.addImport(t.url)]};var y=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},b=function(){};o.linkLoad=function(e,t){var o=setTimeout(function(){n&&alert("timeout"),t()},L*1e3-100),u=function(){clearTimeout(o),a&&(a.onload=b),setTimeout(t,7)};if(!s){var a=y(e);a.onload=u,r.appendChild(a)}else if(i=="webkit"){var a=y(e);c(a,u),r.appendChild(a)}else if(i=="gecko"){var f=document.createElement("style");f.textContent='@import "'+e+'"',h(f,u),r.appendChild(f)}else i=="trident"&&m(e,u)};var w=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],E={},S=function(e,t,n){if(E[e]){t(E[e]);return}var r,i,s;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){s=w[i];try{r=new ActiveXObject(s)}catch(o){}if(r){w=[s];break}}r.open("GET",e,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):(E[e]=r.responseText,t(r.responseText)))},r.send(null)},x=0,T;o.inject=function(e){x<31&&(T=document.createElement("style"),T.type="text/css",r.appendChild(T),x++),T.styleSheet?T.styleSheet.cssText+=e:T.appendChild(document.createTextNode(e))};var N=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,C=window.location.pathname.split("/");C.pop(),C=C.join("/")+"/";var k=function(t,n,r){t.match(u)||(t="/"+e.convertURIBase(t,C,"/")),S(t,function(i){i=e(i,t,C);var s=[],o=[],u=[],a;while(a=N.exec(i)){var f=a[4]||a[5]||a[7]||a[8]||a[9];s.push(f),o.push(N.lastIndex-a[0].length),u.push(a[0].length)}var l=0;for(var c=0;c<s.length;c++)(function(e){k(s[e],function(t){i=i.substr(0,o[e])+t+i.substr(o[e]+u[e]);var r=t.length-u[e];for(var a=e+1;a<s.length;a++)o[a]+=r;l++,l==s.length&&n(i)},r)})(c);s.length==0&&n(i)},r)};o.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var L,A=!1;return o.load=function(e,t,r,i,u){L=L||i.waitSeconds||7;var a=e+(u?".less":".css");if(o.attachBuffer(a,r))return;var f=t.toUrl(a);!A&&n&&(alert(s?"hacking links":"not hacking"),A=!0),u?k(f,function(e){u&&(e=u(e,function(e){o.inject(e),setTimeout(r,7)}))}):o.linkLoad(f,r)},n&&(o.inspect=function(){if(stylesheet.styleSheet)return stylesheet.styleSheet.cssText;if(stylesheet.innerHTML)return stylesheet.innerHTML}),o}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/divman.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/accordion.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/tab.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/modal.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/badge.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/alert.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/grid.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/popup.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/button.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/overlay.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/popover.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("bundles/framework/bundle/divmanazer/module",["oskari","jquery","./instance","./request/AddExtensionRequest","./request/AddExtensionRequestHandler","./request/RemoveExtensionRequest","./request/RemoveExtensionRequestHandler","./request/UpdateExtensionRequest","./request/UpdateExtensionRequestHandler","./request/ModalDialogRequest","./request/ModalDialogRequestHandler","./event/ExtensionUpdatedEvent","./component/Accordion","./component/AccordionPanel","./component/TabContainer","./component/TabDropdownContainer","./component/TabPanel","./component/Badge","./component/Alert","./component/Popup","./component/Overlay","./component/Button","./component/Form","./component/UIHelper","./component/FormInput","./component/Popover","./component/Grid","./component/GridModel","./component/ProgressSpinner","./extension/DefaultTile","./extension/DefaultFlyout","./extension/EnhancedFlyout","./extension/DefaultExtension","./extension/EnhancedExtension","./extension/DefaultView","./extension/DefaultLayout","css!resources/framework/bundle/divmanazer/css/divman.css","css!resources/framework/bundle/divmanazer/css/accordion.css","css!resources/framework/bundle/divmanazer/css/tab.css","css!resources/framework/bundle/divmanazer/css/modal.css","css!resources/framework/bundle/divmanazer/css/badge.css","css!resources/framework/bundle/divmanazer/css/alert.css","css!resources/framework/bundle/divmanazer/css/grid.css","css!resources/framework/bundle/divmanazer/css/popup.css","css!resources/framework/bundle/divmanazer/css/button.css","css!resources/framework/bundle/divmanazer/css/overlay.css","css!resources/framework/bundle/divmanazer/css/popover.css"],function(e,t){return e.bundleCls("divmanazer").category({create:function(){return e.clazz.create("Oskari.userinterface.bundle.ui.UserInterfaceBundleInstance")},update:function(e,t,n,r){}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('/* setup document body so flyouts will not make scrollbars to browser window */\nbody {\n  position: fixed;\n  width: 100%;\n  height: 100%; }\n\n/* flyout toolbar */\n.oskari-flyoutheading {\n  background-color: #ffd400;\n  border-top: 1px solid #ffdf00;\n  border-bottom: 1px solid #ebb819;\n  height: 14px;\n  width: 100%; }\n\n.oskari-flyouttoolbar {\n  height: 57px;\n  width: 100%;\n  background-color: #fdf8d9;\n  border-top: #fdfdfd;\n  border-bottom: #fef2ba; }\n\n.oskari-flyout-title {\n  float: left;\n  margin-left: 20px;\n  margin-top: 12px;\n  height: 20px;\n  display: inline-block; }\n\n.oskari-flyout-title p {\n  margin: 0;\n  padding: 0;\n  font: 16px/20px "Open Sans", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif; }\n\n/** flyout toolbar tools and tool states  */\n.oskari-flyouttools {\n  float: right;\n  margin-right: 25px;\n  height: 16px;\n  display: inline-block;\n  margin-top: 15px; }\n\n.oskari-flyouttool-detach {\n  display: none;\n  /* visualise here if this tool required */ }\n\n.oskari-detached .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-flyouttool-attach {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-attached .oskari-flyouttool-attach {\n  display: none; }\n\n.oskari-flyouttool-minimize {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-attached .oskari-flyouttool-minimize {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-minimize {\n  display: none; }\n\n.oskari-flyouttool-restore {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-flyouttool-help {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-restore {\n  display: inline-block; }\n\n.oskari-minimized .oskari-flyouttool-attach {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-flyouttool-close {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-right: 2px;\n  margin-left: auto; }\n\n/* flyout */\n.oskari-flyout {\n  background-color: #fafafa;\n  position: absolute;\n  z-index: 1100;\n  margin: 0px;\n  padding: 0px;\n  border: 1px solid rgba(0, 0, 0, 0.2); }\n\n/* flyout states */\n/*.oskari-minimized {\r\n width: 640px;\r\n height: 64px;\r\n overflow: hidden;\r\n\r\n min-height: 64px;\r\n max-height: 64px;\r\n }*/\n.oskari-closed {\n  display: none; }\n\n.oskari-minimized {\n  display: none; }\n\n.oskari-flyoutcontent {\n  margin: 0;\n  padding: 20px 20px 20px 25px;\n  border: 0;\n  /*overflow: auto;*/ }\n\n/** tile */\n/* tile states */\n.oskari-tile-attached {\n  border-bottom: 1px solid white;\n  background-color: white; }\n\n.oskari-tile-detached {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: white; }\n\n.oskari-tile-minimized {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: #2d2d2d; }\n\n.oskari-tile-closed {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: #2d2d2d; }\n\n.oskari-tile-container {\n  margin: 0; }\n\n.oskari-tile {\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  height: 31px;\n  width: 153px;\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  line-height: 24px; }\n\n.oskari-tile-title {\n  display: inline-block;\n  margin: 0;\n  margin-top: 2px;\n  margin-left: 16px;\n  padding: 0;\n  float: left;\n  height: 28px;\n  width: 112px;\n  font-family: Arial, Helvetica;\n  font-weight: bold;\n  font-size: 11px;\n  text-align: left;\n  text-transform: uppercase;\n  /*color: white;*/ }\n\n.oskari-tile-attached .oskari-tile-title {\n  color: #333438; }\n\n.oskari-tile-detached .oskari-tile-title {\n  color: #333438; }\n\n.oskari-tile-minimized .oskari-tile-title {\n  color: white; }\n\n.oskari-tile-closed .oskari-tile-title {\n  color: white; }\n\n.oskari-tile-status {\n  float: right;\n  text-align: center;\n  display: inline-block;\n  font-size: 11px;\n  font-weight: bold;\n  height: 19px !important;\n  width: 20px !important;\n  margin: 1px;\n  padding: 1px; }\n\n.oskari-tile-close {\n  display: none; }\n\n.oskariform .oskarifield {\n  padding: 10px; }\n\n/** media queries */\n@media screen {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media screen {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media only screen and (min-width: 400px) and (max-width: 599px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 500px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 500px; } }\n@media only screen and (min-width: 600px) and (max-width: 799px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 600px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-width: 800px) and (max-width: 1199px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 1000px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-width: 1200px) and (max-width: 1599px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 600px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-height: 400px) and (max-height: 599px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 300px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 600px) and (max-height: 799px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 800px) and (max-height: 999px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 700px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1000px) and (max-height: 1199px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 900px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1200px) and (max-height: 1399px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 1100px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1400px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 1300px;\n    /* overflow: auto; */ } }\n/* IE8 TEMP fixes */\n.oskari-flyoutcontentcontainer_IE_400_599 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 300px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_600_799 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 500px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_800_999 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 700px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1000_1199 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 900px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1200_1399 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 1100px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1400 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 1300px;\n  /* overflow: auto; */ }\n/* Accordion */\r\ndiv.accordion div.accordion_panel {\r\n  background-color: #f3f3f3;\r\n  border: 1pt solid #c0d0d0;\r\n  margin: 0;\r\n  padding: 0; }\r\n\r\ndiv.accordion_panel div.header div.headerIcon {\r\n  display: inline-block;\r\n  margin-left: 12px;\r\n  vertical-align: middle; }\r\n\r\ndiv.accordion_panel div.header div.headerText {\r\n  display: inline-block;\r\n  font-weight: bold;\r\n  padding: 8px 10px 8px 12px;\r\n  font: 14pt Arial, sans-serif; }\r\n\r\ndiv.accordion div.accordion_panel.open {\r\n  background-color: #FFFFFF; }\r\n\r\ndiv.accordion div.accordion_panel div.content {\r\n  padding: 5px; }\r\n\r\ndiv.accordion div.accordionmsg {\r\n  padding: 10px; }\r\n/* "tab" content */\r\ndiv.oskariTabs div.tabsContent {\r\n  border-left: 1px solid #999999;\r\n  border-right: 1px solid #999999;\r\n  border-top: 0px solid #999999;\r\n  border-bottom: 1px solid #999999;\r\n  color: #000000;\r\n  height: 90%; }\r\n\r\ndiv.oskariTabs div.tab-content {\r\n  padding: 10px; }\r\n\r\n/* tab headers */\r\ndiv.oskariTabs div.tabsHeader {\r\n  background: url(\'/Oskari/resources/framework/bundle/divmanazer/images/tab_bg.png\') repeat-x scroll center bottom;\r\n  /* #FFFFFF*/\r\n  clear: left;\r\n  float: left;\r\n  font: 12pt Arial, sans-serif;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n  padding: 0;\r\n  width: 100%; }\r\n\r\ndiv.oskariTabs div.tabsHeader ul {\r\n  float: left;\r\n  list-style: none outside none;\r\n  margin: 0;\r\n  padding: 0;\r\n  text-align: center; }\r\n\r\ndiv.oskariTabs div.tabsHeader ul li {\r\n  display: block;\r\n  float: left;\r\n  list-style: none outside none;\r\n  margin: 10px 0 0;\r\n  padding: 0;\r\n  right: 50%; }\r\n\r\ndiv.oskariTabs div.tabsHeader ul li a {\r\n  background: none repeat scroll 0 0 #FFFFFF;\r\n  border-bottom: 1px solid #999999;\r\n  color: #3333FF;\r\n  display: block;\r\n  float: left;\r\n  padding: 10px 20px;\r\n  position: relative;\r\n  text-decoration: none; }\r\n\r\ndiv.oskariTabs div.tabsHeader ul li.active a {\r\n  border-left: 1px solid #999999;\r\n  border-right: 1px solid #999999;\r\n  border-top: 1px solid #999999;\r\n  border-bottom: 0px solid #999999;\r\n  color: #000000; }\r\n\r\ndiv.oskariTabs div.tabsHeader ul li.fill a {\r\n  width: 100%; }\r\n.modaldialog {\r\n  border: 1px solid #3C3C3C;\r\n  margin: 0px; }\r\n\r\n.modaltitle {\r\n  margin: 0px;\r\n  border-bottom: 1px solid #3C3C3C;\r\n  color: #3C3C3C;\r\n  padding: 8px 16px 4px 16px; }\r\n\r\n.modalmessage {\r\n  width: 100%;\r\n  color: #3C3C3C;\r\n  padding: 8px 16px 8px 16px; }\r\n\r\n.modalbuttons {\r\n  width: 100%;\r\n  display: inline-block;\r\n  padding: 0px 16px 4px 16px; }\r\n\r\n.modalbutton {\r\n  margin: 2px;\r\n  display: inline-block; }\r\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-badge {\n  font-size: 10.998px;\n  font-weight: bold;\n  line-height: 14px;\n  color: #ffffff;\n  vertical-align: baseline;\n  white-space: nowrap;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\n  background-color: #999999; }\n\n.oskari-badge {\n  padding: 1px 9px 2px;\n  -webkit-border-radius: 9px;\n  -moz-border-radius: 9px;\n  border-radius: 9px; }\n\na.oskari-badge:hover {\n  color: #ffffff;\n  text-decoration: none;\n  cursor: pointer; }\n\n.oskari-badge-important {\n  background-color: #b94a48; }\n\n.oskari-badge-important[href] {\n  background-color: #953b39; }\n\n.oskari-badge-warning {\n  background-color: #f89406; }\n\n.oskari-badge-warning[href] {\n  background-color: #c67605; }\n\n.oskari-badge-success {\n  background-color: #468847; }\n\n.oskari-badge-success[href] {\n  background-color: #356635; }\n\n.oskari-badge-info {\n  background-color: #3a87ad; }\n\n.oskari-badge-info[href] {\n  background-color: #2d6987; }\n\n.oskari-badge-inverse {\n  background-color: #333333; }\n\n.oskari-badge-inverse[href] {\n  background-color: #1a1a1a; }\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-alert {\n  padding-left: 8px;\n  padding-top: 4px;\n  margin: 4px;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n  background-color: #fcf8e3;\n  border: 1px solid #fbeed5;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  color: #c09853;\n  position: relative;\n  height: 24px; }\n\n.oskari-alert-heading {\n  color: inherit; }\n\n.oskari-alert-icon-close {\n  position: absolute;\n  top: 4px;\n  right: 0px;\n  width: 24px;\n  height: 24px; }\n\n.oskari-alert-success {\n  background-color: #dff0d8;\n  border-color: #d6e9c6;\n  color: #468847; }\n\n.oskari-alert-danger, .oskari-alert-error {\n  background-color: #f2dede;\n  border-color: #eed3d7;\n  color: #b94a48; }\n\n.oskari-alert-info {\n  background-color: #d9edf7;\n  border-color: #bce8f1;\n  color: #3a87ad; }\nth.asc {\r\n  background-image: url(\'/Oskari/resources/framework/bundle/divmanazer/images/asc_arrow.png\');\r\n  background-repeat: no-repeat;\r\n  background-position: center center; }\r\n\r\nth.desc {\r\n  background-image: url(\'/Oskari/resources/framework/bundle/divmanazer/images/desc_arrow.png\');\r\n  background-repeat: no-repeat;\r\n  background-position: center center; }\r\n\r\ndiv.column-selector-placeholder {\r\n  border-style: none;\r\n  float: left;\r\n  opacity: 1.0;\r\n  margin: 0;\r\n  padding: 0;\r\n  right: 0;\r\n  width: 25px;\r\n  height: 7px;\r\n  max-width: 25px;\r\n  max-height: 7px; }\r\n\r\ndiv.icon-menu {\r\n  position: absolute;\r\n  opacity: 1.0;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 25px;\r\n  height: 8px;\r\n  max-width: 25px;\r\n  max-height: 7px; }\r\n\r\ndiv.column-selector {\r\n  position: absolute;\r\n  visibility: hidden;\r\n  background-color: white;\r\n  margin-top: 7px;\r\n  margin-right: 50px;\r\n  padding: 0;\r\n  border: 1px solid;\r\n  z-index: 10001; }\r\n\r\ndiv.column-selector div.close-selector-button {\r\n  width: 16px;\r\n  height: 16px;\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px; }\r\n\r\ndiv.column-selector ul.column-selector-list {\r\n  list-style-type: none;\r\n  padding-right: 30px; }\r\n\r\ndiv.column-selector label.column-label {\r\n  padding-left: 5px; }\r\ndiv.divmanazerpopup {\n  max-width: 500px;\n  min-width: 200px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  background-color: white;\n  -moz-background-clip: border;\n  /* Firefox 3.6 */\n  -webkit-background-clip: border;\n  /* Safari 4? Chrome 6? */\n  background-clip: border-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  -moz-background-clip: padding;\n  /* Firefox 3.6 */\n  -webkit-background-clip: padding;\n  /* Safari 4? Chrome 6? */\n  background-clip: padding-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  -moz-background-clip: content;\n  /* Firefox 3.6 */\n  -webkit-background-clip: content;\n  /* Safari 4? Chrome 6? */\n  background-clip: content-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  border: 5px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n  /*\r\n    box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.80);\r\n    -moz-box-shadow: 0px 3px 3px black;\r\n    -webkit-box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.80);\r\n    */\n  z-index: 9000; }\n\ndiv.divmanazerpopup h3 {\n  background-color: #FDF8D9;\n  border-radius: 5px 5px 0 0;\n  font-size: 18px;\n  line-height: 28px;\n  padding: 5px 10px; }\n\ndiv.divmanazerpopup div.content {\n  margin: 10px; }\n\ndiv.divmanazerpopup div.content textarea {\n  resize: none; }\n\ndiv.divmanazerpopup div.content ul {\n  margin: 10px; }\n\ndiv.divmanazerpopup.no_resize div.content textarea {\n  resize: none; }\n\ndiv.divmanazerpopup div.actions {\n  margin: 10px;\n  text-align: center; }\n\ndiv.divmanazerpopup div.actions input {\n  margin: 10px; }\n\n.divmanazerpopup.arrow:after, .divmanazerpopup.arrow:before {\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  /*pointer-events: none; */ }\n\n/* Bottom alignment */\n.divmanazerpopup.bottom:after, .divmanazerpopup.bottom:before {\n  bottom: 100%; }\n\n.divmanazerpopup.bottom:after {\n  border-bottom-color: #FDF8D9;\n  border-width: 5px;\n  margin-left: -5px;\n  left: 50%; }\n\n.divmanazerpopup.bottom:before {\n  border-bottom-color: #000000;\n  border-width: 6px;\n  margin-left: -6px;\n  left: 50%; }\n\n/* top alignment */\n.divmanazerpopup.top:after, .divmanazerpopup.top:before {\n  top: 100%; }\n\n.divmanazerpopup.top:after {\n  border-top-color: #FFFFFF;\n  border-width: 5px;\n  margin-left: -5px;\n  left: 50%; }\n\n.divmanazerpopup.top:before {\n  border-top-color: #000000;\n  border-width: 6px;\n  margin-left: -6px;\n  left: 50%; }\n\n/* left alignment */\n.divmanazerpopup.left:after, .divmanazerpopup.left:before {\n  left: 100%; }\n\n.divmanazerpopup.left:after {\n  border-left-color: #FDF8D9;\n  border-width: 5px;\n  margin-top: -5px;\n  top: 50%; }\n\n.divmanazerpopup.left:before {\n  border-left-color: #000000;\n  border-width: 6px;\n  margin-top: -6px;\n  top: 50%; }\n\n/* right alignment */\n.divmanazerpopup.right:after, .divmanazerpopup.right:before {\n  right: 100%; }\n\n.divmanazerpopup.right:after {\n  border-right-color: #FDF8D9;\n  border-width: 5px;\n  margin-top: -5px;\n  top: 50%; }\n\n.divmanazerpopup.right:before {\n  border-right-color: #000000;\n  border-width: 6px;\n  margin-top: -6px;\n  top: 50%; }\ndiv.oskaributton {\r\n  display: inline-block;\r\n  margin: 5px; }\r\n\r\ndiv.oskaributton.primary input {\r\n  color: #3CA9FC; }\r\ndiv.oskarioverlay {\r\n  position: absolute;\r\n  background-color: black;\r\n  z-index: 8000; }\r\n\r\n.transparent {\r\n  zoom: 1;\r\n  filter: alpha(opacity=50);\r\n  /* unquote for libsass bug */\r\n  opacity: 0.5; }\r\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-tooltip {\n  position: absolute;\n  z-index: 1200;\n  display: block;\n  visibility: visible;\n  padding: 5px;\n  font-size: 11px;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  /* unquote for libsass bug */ }\n\n.oskari-tooltip.in {\n  opacity: 0.8;\n  filter: alpha(opacity=80);\n  /* unquote for libsass bug */ }\n\n.oskari-tooltip.top {\n  margin-top: -2px; }\n\n.oskari-tooltip.right {\n  margin-left: 2px; }\n\n.oskari-tooltip.bottom {\n  margin-top: 2px; }\n\n.oskari-tooltip.left {\n  margin-left: -2px; }\n\n.oskari-tooltip.top .oskari-tooltip-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #000000; }\n\n.oskari-tooltip.left .oskari-tooltip-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 5px solid #000000; }\n\n.oskari-tooltip.bottom .oskari-tooltip-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid #000000; }\n\n.oskari-tooltip.right .oskari-tooltip-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-right: 5px solid #000000; }\n\n.oskari-tooltip-inner {\n  max-width: 640px;\n  padding: 3px 8px;\n  color: #ffffff;\n  text-align: center;\n  text-decoration: none;\n  background-color: #000000;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px; }\n\n.oskari-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0; }\n\n.oskari-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1210;\n  display: none;\n  padding: 5px; }\n\n.oskari-popover.top {\n  margin-top: -5px; }\n\n.oskari-popover.right {\n  margin-left: 5px; }\n\n.oskari-popover.bottom {\n  margin-top: 5px; }\n\n.oskari-popover.left {\n  margin-left: -5px; }\n\n.oskari-popover.top .oskari-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #000000; }\n\n.oskari-popover.right .oskari-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-right: 5px solid #000000; }\n\n.oskari-popover.bottom .oskari-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid #000000; }\n\n.oskari-popover.left .oskari-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 5px solid #000000; }\n\n.oskari-popover .oskari-arrow {\n  position: absolute;\n  width: 0;\n  height: 0; }\n\n.oskari-popover-inner {\n  padding: 3px;\n  /*width: 280px;*/\n  overflow: hidden;\n  background: #000000;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n  border-radius: 6px;\n  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); }\n\n.oskari-popover-title {\n  padding: 9px 15px;\n  line-height: 1;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #eee;\n  -webkit-border-radius: 3px 3px 0 0;\n  -moz-border-radius: 3px 3px 0 0;\n  border-radius: 3px 3px 0 0; }\n\n.oskari-popover-content {\n  padding: 14px;\n  background-color: #ffffff;\n  -webkit-border-radius: 0 0 3px 3px;\n  -moz-border-radius: 0 0 3px 3px;\n  border-radius: 0 0 3px 3px;\n  -webkit-background-clip: padding-box;\n  -moz-background-clip: padding-box;\n  background-clip: padding-box; }\n\n.oskari-popover-content p, .oskari-popover-content ul, .oskari-popover-content ol {\n  margin-bottom: 0; }\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;