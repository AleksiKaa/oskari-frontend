<link rel="import"
      href="libs/polymer/polymer.html">

<link href="oskari-indicatorselector.html" rel="import">
<link href="oskari-statsgrid.html" rel="import">

<dom-module id="oskari-statsview">

  <template>
      <oskari-indicatorselector locale="[[locale]]" language="[[language]]" ajax-url="[[ajaxUrl]]"
        sources="{{sources}}" selected-indicators="{{selectedIndicators}}" selected-layer="{{selectedLayer}}"
        layer-info="{{layerInfo}}" region-info="{{regionInfo}}"
        id="indicatorselector"></oskari-indicatorselector>
      <oskari-statsgrid locale="[[locale]]" language="[[language]]" ajax-url="[[ajaxUrl]]"
        sources="{{sources}}" selected-indicators="{{selectedIndicators}}" selected-layer="{{selectedLayer}}"
        layer-info="{{layerInfo}}" region-info="{{regionInfo}}" hidden$="[[!showGrid]]"
        id="statsgrid"></oskari-statsgrid>
      <content></content>
    </div>
  </template>

  <script>
    Polymer({
      is: "oskari-statsview",
      properties: {
          "locale": Object,
          "language": String,
          "ajaxUrl": String,
          "sources": Object,
          "selectedIndicators": {
              "type": Array,
              "notify": true
          },
          "showGrid": {
              "type": Boolean,
              "notify": true,
              "value": false
          }
      },
      "observers": [
          "selectedIndicatorsChanged(ajaxUrl, selectedIndicators.splices)"
      ],
      "selectedIndicatorsChanged": function() {
          this.set("showGrid", !!this.selectedIndicators && this.selectedIndicators.length > 0);
      }
    });
  </script>

</dom-module>

