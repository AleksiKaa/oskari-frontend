var requirejs,require,define;!function(ga){function ka(e,t,n,r){return r||""}function K(e){return"[object Function]"===Q.call(e)}function L(e){return"[object Array]"===Q.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function X(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));--n);}}function x(e,t){return la.call(e,t)}function e(e,t){return x(e,t)&&e[t]}function D(e,t){for(var n in e)if(x(e,n)&&t(e[n],n))break}function Y(e,t,n,r){return t&&D(t,function(t,i){!n&&x(e,i)||(!r||"object"!=typeof t||!t||L(t)||K(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),Y(e[i],t,n,r)))}),e}function z(e,t){return function(){return t.apply(e,arguments)}}function ha(e){throw e}function ia(e){if(!e)return e;var t=ga;return y(e.split("."),function(e){t=t[e]}),t}function F(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ma(t){function n(t,n,r){var i,o,s,a,u,l,c,f;n=n&&n.split("/");var d=M.map,p=d&&d["*"];if(t){for(t=t.split("/"),o=t.length-1,M.nodeIdCompat&&U.test(t[o])&&(t[o]=t[o].replace(U,"")),"."===t[0].charAt(0)&&n&&(o=n.slice(0,n.length-1),t=o.concat(t)),o=t,s=0;s<o.length;s++)a=o[s],"."===a?(o.splice(s,1),--s):".."===a&&0!==s&&(1!==s||".."!==o[2])&&".."!==o[s-1]&&s>0&&(o.splice(s-1,2),s-=2);t=t.join("/")}if(r&&d&&(n||p)){o=t.split("/"),s=o.length;e:for(;s>0;--s){if(u=o.slice(0,s).join("/"),n)for(a=n.length;a>0;--a)if((r=e(d,n.slice(0,a).join("/")))&&(r=e(r,u))){i=r,l=s;break e}!c&&p&&e(p,u)&&(c=e(p,u),f=s)}!i&&c&&(i=c,l=f),i&&(o.splice(0,l,i),t=o.join("/"))}return(i=e(M.pkgs,t))?i:t}function r(e){E&&y(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(t){var n=e(M.paths,t);return n&&L(n)&&1<n.length?(n.shift(),_.require.undef(t),_.makeRequire(null,{skipMap:!0})([t]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(t,r,i,s){var a,u,l=null,c=r?r.name:null,f=t,d=!0,p="";return t||(d=!1,t="_@r"+(A+=1)),t=o(t),l=t[0],t=t[1],l&&(l=n(l,c,s),u=e(O,l)),t&&(l?p=u&&u.normalize?u.normalize(t,function(e){return n(e,c,s)}):-1===t.indexOf("!")?n(t,c,s):t:(p=n(t,c,s),t=o(p),l=t[0],p=t[1],i=!0,a=_.nameToUrl(p))),i=!l||u||i?"":"_unnormalized"+(R+=1),{prefix:l,name:p,parentMap:r,unnormalized:!!i,url:a,originalName:f,isDefine:d,id:(l?l+"!"+p:p)+i}}function a(t){var n=t.id,r=e(T,n);return r||(r=T[n]=new _.Module(t)),r}function u(t,n,r){var i=t.id,o=e(T,i);!x(O,i)||o&&!o.defineEmitComplete?(o=a(t),o.error&&"error"===n?r(o.error):o.on(n,r)):"defined"===n&&r(O[i])}function l(t,n){var r=t.requireModules,i=!1;n?n(t):(y(r,function(n){(n=e(T,n))&&(n.error=t,n.events.error&&(i=!0,n.emit("error",t)))}),i||g.onError(t))}function c(){V.length&&(y(V,function(e){var t=e[0];"string"==typeof t&&(_.defQueueMap[t]=!0),j.push(e)}),V=[])}function f(e){delete T[e],delete I[e]}function d(t,n,r){var i=t.map.id;t.error?t.emit("error",t.error):(n[i]=!0,y(t.depMaps,function(i,o){var s=i.id,a=e(T,s);!a||t.depMatched[o]||r[s]||(e(n,s)?(t.defineDep(o,O[s]),t.check()):d(a,n,r))}),r[i]=!0)}function p(){var e,t,n=(e=1e3*M.waitSeconds)&&_.startTime+e<(new Date).getTime(),o=[],s=[],a=!1,u=!0;if(!b){if(b=!0,D(I,function(e){var l=e.map,c=l.id;if(e.enabled&&(l.isDefine||s.push(e),!e.error))if(!e.inited&&n)i(c)?a=t=!0:(o.push(c),r(c));else if(!e.inited&&e.fetched&&l.isDefine&&(a=!0,!l.prefix))return u=!1}),n&&o.length)return e=F("timeout","Load timeout for modules: "+o,null,o),e.contextName=_.contextName,l(e);u&&y(s,function(e){d(e,{},{})}),n&&!t||!a||!E&&!ja||k||(k=setTimeout(function(){k=0,p()},50)),b=!1}}function h(e){x(O,e[0])||a(s(e[0],null,!0)).init(e[1],e[2])}function m(e){e=e.currentTarget||e.srcElement;var t=_.onScriptLoad;return e.detachEvent&&!ca?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=_.onScriptError,e.detachEvent&&!ca||e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function v(){var e;for(c();j.length;){if(e=j.shift(),null===e[0])return l(F("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}_.defQueueMap={}}var b,w,_,C,k,M={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},T={},I={},q={},j=[],O={},B={},P={},A=1,R=1;return C={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?O[e.map.id]=e.exports:e.exports=O[e.map.id]={}:void 0},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return e(M.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},w=function(t){this.events=e(q,t.id)||{},this.map=t,this.shim=e(M.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=z(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,--this.depCount,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],z(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;B[e]||(B[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(K(i)){if(this.events.error&&this.map.isDefine||g.onError!==ha)try{r=_.execCb(n,i,t,r)}catch(o){e=o}else r=_.execCb(n,i,t,r);if(this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;if(this.exports=r,this.map.isDefine&&!this.ignore&&(O[n]=r,g.onResourceLoad)){var s=[];y(this.depMaps,function(e){s.push(e.normalizedMap||e)}),g.onResourceLoad(_,this.map,s)}f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else x(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var t=this.map,r=t.id,i=s(t.prefix);this.depMaps.push(i),u(i,"defined",z(this,function(i){var o,c,d=e(P,this.map.id),p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=_.makeRequire(t.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return n(e,h,!0)})||""),c=s(t.prefix+"!"+p,this.map.parentMap),u(c,"defined",z(this,function(e){this.map.normalizedMap=c,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(i=e(T,c.id))&&(this.depMaps.push(c),this.events.error&&i.on("error",z(this,function(e){this.emit("error",e)})),i.enable())):d?(this.map.url=_.nameToUrl(d),this.load()):(o=z(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=z(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],D(T,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&f(e.map.id)}),l(e)}),o.fromText=z(this,function(e,n){var i=t.name,u=s(i),c=S;n&&(e=n),c&&(S=!1),a(u),x(M.config,r)&&(M.config[i]=M.config[r]);try{g.exec(e)}catch(f){return l(F("fromtexteval","fromText eval for "+r+" failed: "+f,f,[r]))}c&&(S=!0),this.depMaps.push(u),_.completeLoad(i),m([i],o)}),i.load(t.name,m,o,M))})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){I[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,z(this,function(t,n){var r,i;if("string"==typeof t){if(t=s(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=t,r=e(C,t.id))return void(this.depExports[n]=r(this));this.depCount+=1,u(t,"defined",z(this,function(e){this.undefed||(this.defineDep(n,e),this.check())})),this.errback?u(t,"error",z(this,this.errback)):this.events.error&&u(t,"error",z(this,function(e){this.emit("error",e)}))}r=t.id,i=T[r],x(C,r)||!i||i.enabled||_.enable(t,this)})),D(this.pluginMaps,z(this,function(t){var n=e(T,t.id);n&&!n.enabled&&_.enable(t,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:M,contextName:t,registry:T,defined:O,urlFetched:B,defQueue:j,defQueueMap:{},Module:w,makeModuleMap:s,nextTick:g.nextTick,onError:l,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=M.shim,r={paths:!0,bundles:!0,config:!0,map:!0};D(e,function(e,t){r[t]?(M[t]||(M[t]={}),Y(M[t],e,!0,!0)):M[t]=e}),e.bundles&&D(e.bundles,function(e,t){y(e,function(e){e!==t&&(P[e]=t)})}),e.shim&&(D(e.shim,function(e,t){L(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),n[t]=e}),M.shim=n),e.packages&&y(e.packages,function(e){var t;e="string"==typeof e?{name:e}:e,t=e.name,e.location&&(M.paths[t]=e.location),M.pkgs[t]=e.name+"/"+(e.main||"main").replace(na,"").replace(U,"")}),D(T,function(e,t){e.inited||e.map.unnormalized||(e.map=s(t,null,!0))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ga,arguments)),t||e.exports&&ia(e.exports)}},makeRequire:function(i,o){function u(e,n,r){var c,f;return o.enableBuildCallback&&n&&K(n)&&(n.__requireJsBuild=!0),"string"==typeof e?K(n)?l(F("requireargs","Invalid require call"),r):i&&x(C,e)?C[e](T[i.id]):g.get?g.get(_,e,i,u):(c=s(e,i,!1,!0),c=c.id,x(O,c)?O[c]:l(F("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+t+(i?"":". Use require([])")))):(v(),_.nextTick(function(){v(),f=a(s(null,i)),f.skipMap=o.skipMap,f.init(e,n,r,{enabled:!0}),p()}),u)}return o=o||{},Y(u,{isBrowser:E,toUrl:function(e){var t,r=e.lastIndexOf("."),o=e.split("/")[0];return-1!==r&&("."!==o&&".."!==o||r>1)&&(t=e.substring(r,e.length),e=e.substring(0,r)),_.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return x(O,s(e,i,!1,!0).id)},specified:function(e){return e=s(e,i,!1,!0).id,x(O,e)||x(T,e)}}),i||(u.undef=function(t){c();var n=s(t,i,!0),o=e(T,t);o.undefed=!0,r(t),delete O[t],delete B[n.url],delete q[t],X(j,function(e,n){e[0]===t&&j.splice(n,1)}),delete _.defQueueMap[t],o&&(o.events.defined&&(q[t]=o.events),f(t))}),u},enable:function(t){e(T,t.id)&&a(t).enable()},completeLoad:function(t){var n,r,o=e(M.shim,t)||{},s=o.exports;for(c();j.length;){if(r=j.shift(),null===r[0]){if(r[0]=t,n)break;n=!0}else r[0]===t&&(n=!0);h(r)}if(_.defQueueMap={},r=e(T,t),!n&&!x(O,t)&&r&&!r.inited){if(!(!M.enforceDefine||s&&ia(s)))return i(t)?void 0:l(F("nodefine","No define call for "+t,null,[t]));h([t,o.deps||[],o.exportsFn])}p()},nameToUrl:function(t,n,r){var i,o,s,a;if((i=e(M.pkgs,t))&&(t=i),i=e(P,t))return _.nameToUrl(i,n,r);if(g.jsExtRegExp.test(t))i=t+(n||"");else{for(i=M.paths,o=t.split("/"),s=o.length;s>0;--s)if(a=o.slice(0,s).join("/"),a=e(i,a)){L(a)&&(a=a[0]),o.splice(0,s,a);break}i=o.join("/"),i+=n||(/^data\:|^blob\:|\?/.test(i)||r?"":".js"),i=("/"===i.charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":M.baseUrl)+i}return M.urlArgs&&!/^blob\:/.test(i)?i+M.urlArgs(t,i):i},load:function(e,t){g.load(_,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){("load"===e.type||oa.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=m(e),_.completeLoad(e.id))},onScriptError:function(e){var t=m(e);if(!i(t.id)){var n=[];return D(T,function(e,r){0!==r.indexOf("_@r")&&y(e.depMaps,function(e){return e.id===t.id?(n.push(r),!0):void 0})}),l(F("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},_.require=_.makeRequire(),_}function pa(){return N&&"interactive"===N.readyState?N:(X(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?N=e:void 0}),N)}var g,B,C,H,O,I,N,P,u,T,qa=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ra=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,U=/\.js$/,na=/^\.\//;B=Object.prototype;var Q=B.toString,la=B.hasOwnProperty,E=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ja=!E&&"undefined"!=typeof importScripts,oa=E&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,ca="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),J={},w={},V=[],S=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(K(requirejs))return;w=requirejs,requirejs=void 0}"undefined"==typeof require||K(require)||(w=require,require=void 0),g=requirejs=function(t,n,r,i){var o,s="_";return L(t)||"string"==typeof t||(o=t,L(n)?(t=n,n=r,r=i):t=[]),o&&o.context&&(s=o.context),(i=e(J,s))||(i=J[s]=g.s.newContext(s)),o&&i.configure(o),i.require(t,n,r)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.2.0",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=E,B=g.s={contexts:J,newContext:ma},g({}),y(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=J._;return t.require[e].apply(t,arguments)}}),E&&(C=B.head=document.getElementsByTagName("head")[0],H=document.getElementsByTagName("base")[0])&&(C=B.head=H.parentNode),g.onError=ha,g.createNode=function(e,t,n){return t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r,i=e&&e.config||{};if(E)return r=g.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code")||ca?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(S=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),P=r,H?C.insertBefore(r,H):C.appendChild(r),P=null,r;if(ja)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(o){e.onError(F("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},E&&!w.skipDataMain&&X(document.getElementsByTagName("script"),function(e){return C||(C=e.parentNode),(O=e.getAttribute("data-main"))?(u=O,w.baseUrl||-1!==u.indexOf("!")||(I=u.split("/"),u=I.pop(),T=I.length?I.join("/")+"/":"./",w.baseUrl=T),u=u.replace(U,""),g.jsExtRegExp.test(u)&&(u=O),w.deps=w.deps?w.deps.concat(u):[u],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),L(t)||(n=t,t=null),!t&&K(n)&&(t=[],n.length&&(n.toString().replace(qa,ka).replace(ra,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),S&&(r=P||pa())&&(e||(e=r.getAttribute("data-requiremodule")),i=J[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):V.push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(w)}}(this),define("text",["module"],function(e){"use strict";var t,n,r,i,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),f=l&&location.hostname,d=l&&(location.port||void 0),p={},h=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,s,a,u=t.xdRegExp.exec(e);return u?(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==r.toLowerCase()||(a||s)&&a!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();h.isBuild=i&&i.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),u=h.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void r():void(!l||u(a,c,f,d)?t.get(a,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)}))},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var o=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,i,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,l=r.toUrl(s.moduleName+a)+".js";t.load(u,r,function(n){var r=function(e){return i(l,e)};r.asModule=function(e,t){return i.asModule(e,l,t)},t.write(e,u,r,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(o){r&&r(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,s=t.createXhr();if(s.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(t){var i,o;4===s.readyState&&(i=s.status||0,i>399&&600>i?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);u=String(n.toString())}finally{a.close()}t(u)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,s,a,u={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(a,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),u),s.close(),n.close(),t(u.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),jQuery.fn.outerHTML=function(e){var t;return this.length?e?(jQuery.each(this,function(t,n){var r,i=n,o=n.outerHTML?"outerHTML":"innerHTML";n.outerHTML||(n=jQuery(n).wrap("<div>").parent()[0]),jQuery.isFunction(e)?(r=e.call(i,t,n[o]))!==!1&&(n[o]=r):n[o]=e,n.outerHTML||jQuery(n).children().unwrap()}),this):this[0].outerHTML||(t=this.wrap("<div>").parent().html(),this.unwrap(),t):"undefined"==typeof e?this:null},Oskari=function(){var e="1.36.0",t=!1,n=window.console&&window.console.debug,r=function(e){t&&n&&window.console.debug(e)},i="default",o=!1,s=function(){this.packages={},this.protocols={},this.inheritance={},this.aspects={},this.classcache={},this.globals={}};s.prototype={purge:function(){},protocol:function(e){if(null===e||void 0===e)throw new TypeError("protocol(): Missing protocolName");return this.protocols[e]},_getPackageDefinition:function(e){var t=this.packages[e];return t||(t={},this.packages[e]=t),t},_getClassQName:function(e){var t=e.split(".");return{basePkg:t[0],pkg:t[1],sp:t.slice(2).join(".")}},_getClassInfo:function(e){var t,n=this.classcache[e],r=this._getClassQName(e);return n||(t=this._getPackageDefinition(r.pkg),n=t[r.sp],this.classcache[e]=n),n},_cloneProperties:function(e,t){var n,r,i,o=Array.isArray(t)?t:[t];for(r in e)if(e.hasOwnProperty(r))for(i=e[r],n=o.length-1;n>=0;n-=1)o[n][r]=i},_createEmptyClassDefinition:function(){var e=function(){};return e.prototype={},e},getMetadata:function(e){var t;if(null===e||void 0===e)throw new TypeError("metadata(): Missing className");if(t=this._getClassInfo(e),!t)throw"Class "+e+" does not exist";return t._metadata},_updateMetadata:function(e,t,n,r,i){var o,s,a,u;if(r._metadata||(r._metadata={}),r._metadata.meta=i,u=[e,t,n].join("."),o=i.protocol)for(s=0;s<o.length;s+=1)a=o[s],this.protocols[a]||(this.protocols[a]={}),this.protocols[a][u]=r},_super:function(e,t){var n=this;return function(){return n._._superCategory[e][t].apply(n,arguments)}},define:function(e,t,n,r){var i,o,s,a,u,l,c,f;if(null===e||void 0===e)throw new TypeError("define(): Missing className");if("function"!=typeof t)throw new TypeError("define(): classConstructor is not a function");if(n&&"object"!=typeof n)throw new TypeError("define(): Prototype is not an object");if(o=this._getClassQName(e),a=this._getPackageDefinition(o.pkg),u=a[o.sp],u||(i=this._createEmptyClassDefinition(),s={className:e,superClass:null,subClass:null},u={_class:i,_constructor:t,_category:{},_composition:s},i.prototype._=u,i.prototype._super=this._super,this.inheritance[e]=s,a[o.sp]=u),t&&(u._constructor=t),n&&(this._cloneProperties(n,u._class.prototype),u._category[e]=n),r){for(c=r.extend,l=0;c&&l<c.length;l+=1)f=this.lookup(c[l]),f._composition.subClass||(f._composition.subClass={}),f._composition.subClass[e]=u,u._composition.superClass=f;this._updateMetadata(o.basePkg,o.pkg,o.sp,u,r)}return this._pullDown(u),this._pushDown(u),u},category:function(e,t,n){var r,i,o,s,a,u;if(null===e||void 0===e)throw new TypeError("category(): Missing className");return o=this._getClassQName(e),a=this._getPackageDefinition(o.pkg),i=a[o.sp],i||(r=this._createEmptyClassDefinition(),s={className:e,superClass:null,subClass:null},i={_class:r,_constructor:t,_category:{},_composition:s},r.prototype._=i,r.prototype._super=this._super,this.inheritance[e]=s,a[o.sp]=i),u=i._class.prototype,this._cloneProperties(n,u),n&&(i._category[t]=n),this._pullDown(i),this._pushDown(i),i},lookup:function(e,t){var n,r,i,o,s;if(null===e||void 0===e)throw new TypeError("lookup(): Missing className");return r=this._getClassQName(e),o=this._getPackageDefinition(r.pkg),s=o[r.sp],s||(n=this._createEmptyClassDefinition(),i={className:e,superClass:null,subClass:null},s={_class:n,_constructor:t,_category:{},_composition:i},this.inheritance[e]=i,o[r.sp]=s),s},extend:function(e,t){var n,r;if(null===e||void 0===e)throw new TypeError("extend(): Missing subClassName");if(null===t||void 0===t)throw new TypeError("extend(): Missing superClassName");return n=this.lookup(t),r=this.lookup(e),n._composition.subClass||(n._composition.subClass={}),n._composition.subClass[e]=r,r._composition.superClass=n,this._pullDown(r),r},_pushDown:function(e){var t,n;if(null===e||void 0===e)throw new TypeError("_pushDown(): Missing classInfo");if(e._composition.subClass){for(t in e._composition.subClass)e._composition.subClass.hasOwnProperty(t)&&(n=e._composition.subClass[t],this._pullDown(n),this._pushDown(n));return e}},_pullDown:function(e){var t,n,r,i,o,s,a,u,l,c;if(null===e||void 0===e)throw new TypeError("_pullDown(): Missing classInfo");if(e._composition.superClass){for(i=[],i.push(e),c=e;;){if(c=c._composition.superClass,!c)break;i.push(c)}for(e._constructors=[],e._superCategory={},u=e._class.prototype,t=i.length-1;t>=0;t-=1){r=i[t],o=r._composition.className,s=r._constructor,e._constructors.push(s),a={};for(n in r._category)r._category.hasOwnProperty(n)&&(l=r._category[n],this._cloneProperties(l,[u,a]));e._superCategory[o]=a}return e}},_slicer:Array.prototype.slice,create:function(e){var t,n,r,i,o;if(null===e||void 0===e)throw new TypeError("create(): Missing className");if(o=this._slicer.apply(arguments,[1]),t=this._getClassInfo(e),!t)throw'Class "'+e+'" does not exist';if(n=new t._class,r=t._constructors)for(i=0;i<r.length;i+=1){if(null===r[i]||void 0===r[i])throw new Error("Class "+e+" is missing super constructor "+(i+1)+"/"+r.length);var s=r[i].apply(n,o);s&&(n=s)}else{var s=t._constructor.apply(n,o);s&&(n=s)}return n},createWithClassInfo:function(e,t){var n,r,i;if(null===e||void 0===e)throw new TypeError("createWithClassInfo(): Missing classInfo");if(n=new e._class,r=e._constructors)for(i=0;i<r.length;i+=1){if(null===r[i]||void 0===r[i])throw new Error('createWithClassInfo(): Undefined constructor in class "'+e._composition.className+'"');r[i].apply(n,t)}else e._constructor.apply(n,t);return n},builder:function(e){var t;if(null===e||void 0===e)throw new TypeError("builder(): Missing className");if(t=this._getClassInfo(e),!t)throw'Class "'+e+'" does not exist';return this.getBuilderFromClassInfo(t)},getBuilderFromClassInfo:function(e){if(null===e||void 0===e)throw new TypeError("getBuilderFromClassInfo(): Missing classInfo");return e._builder?e._builder:(e._builder=function(){var t,n=new e._class,r=e._constructors,i=arguments;if(r)for(t=0;t<r.length;t+=1)r[t].apply(n,i);else e._constructor.apply(n,i);return n},e._builder)},_global:function(e,t){return void 0===e?this.globals:(void 0!==t&&(this.globals[e]=t),this.globals[e])}};var a=new s,u=a,l=function(e){var t;this.manager=null;for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};l.prototype={setState:function(e){return this.state=e,this.manager.postChange(this.bundle,this.instance,this.state),this.state},getState:function(){return this.state}};var c=function(e,t,n){this.config=e,this.callback=t,this.fired=!1,this.info=n};c.prototype={execute:function(e,t,n,r){var i,o,s,a=this;if(!a.fired){for(i in a.config["Import-Bundle"])if(a.config["Import-Bundle"].hasOwnProperty(i)&&(o=e.bundleSourceStates[i],!o||1!==o.state))return void e.log("Trigger not fired due "+i+" for "+r||this.info);a.fired=!0,e.log("Posting trigger"),s=this.callback,window.setTimeout(function(){s(e)},0)}}};var f=function(){var e=this;e.serial=0,e.bundleDefinitions={},e.sources={},e.bundleInstances={},e.bundles={},e.bundleDefinitionStates={},e.bundleSourceStates={},e.bundleStates={},e.triggers=[],e.loaderStateListeners=[]};f.prototype={_getSerial:function(){return this.serial+=1,this.serial},_purge:function(){var e,t=this;for(e in t.sources)t.sources.hasOwnProperty(e)&&delete t.sources[e];for(e in t.bundleDefinitionStates)t.bundleDefinitionStates.hasOwnProperty(e)&&delete t.bundleDefinitionStates[e].loader;for(e in t.bundleSourceStates)t.bundleSourceStates.hasOwnProperty(e)&&delete t.bundleSourceStates[e].loader},log:function(e){r(e)},_install:function(e,t,n,r){var i=this,o=i.bundleDefinitionStates[e];o?(o.state=1,i.log("SETTING STATE FOR BUNDLEDEF "+e+" existing state to "+o.state)):(o={state:1},i.bundleDefinitionStates[e]=o,i.log("SETTING STATE FOR BUNDLEDEF "+e+" NEW state to "+o.state)),o.metadata=r,i.bundleDefinitions[e]=t,i.sources[e]=n,i.postChange(null,null,"bundle_definition_loaded")},installBundleClass:function(e,t){var n=Oskari.clazz.create(t);n&&Oskari.bundle(e,{clazz:n,metadata:u.getMetadata(t).meta})},installBundleClassInfo:function(e,t){var n=u.getBuilderFromClassInfo(t),r=t._metadata,i={};if(null===e||void 0===e)throw new TypeError("installBundleClassInfo(): Missing biid");if(null===t||void 0===t)throw new TypeError("installBundleClassInfo(): Missing classInfo");this._install(e,n,i,r)},postChange:function(e,t,n){var r,i,o,s=this;if(null===n||void 0===n)throw new TypeError("postChange(): Missing info");s._update(e,t,n);for(r in s.bundles)s.bundles.hasOwnProperty(r)&&(o=s.bundles[r],o.update(s,e,t,n));for(r in s.bundleInstances)s.bundleInstances.hasOwnProperty(r)&&(i=s.bundleInstances[r],i&&i.update(s,e,t,n))},createBundle:function(e,t){var n,r,i,o=this;if(null===e||void 0===e)throw new TypeError("createBundle(): Missing biid");if(null===t||void 0===t)throw new TypeError("createBundle(): Missing bid");if(i=o.bundleDefinitionStates[e],!i)throw new Error("createBundle(): Couldn't find a definition for bundle "+e+"/"+t+", check spelling and that the bundle has been installed.");return(r=this.bundleDefinitions[e])?(n=r(i),this.bundles[t]=n,this.bundleStates[t]={state:!0,bundlImpl:e},this.postChange(n,null,"bundle_created"),n):void alert("this.bundleDefinitions["+e+"] is null!")},_update:function(e,t,n){var r,i,o=this;for(o.log("Update called with info "+n),r=0;r<o.triggers.length;r+=1)i=o.triggers[r],i.execute(o)},createInstance:function(e){var t,n,r,i=this;if(null===e||void 0===e)throw new TypeError("createInstance(): Missing bid");if(!i.bundleStates[e]||!i.bundleStates[e].state)throw new Error("createInstance(): Couldn't find a definition for bundle "+e+", check spelling and that the bundle has been installed.");if(t=this.bundles[e],null===t||void 0===t)throw new Error("createInstance(): Couldn't find bundle with id"+e);if(n=t.create(),null===n||void 0===n)throw new Error("createInstance(): Couldn't create bundle "+e+" instance. Make sure your bundle's create function returns the instance.");return r=i._getSerial().toString(),n.mediator=new l({bundleId:e,instanceid:r,state:"initial",bundle:t,instance:n,manager:this,clazz:a,requestMediator:{}}),this.bundleInstances[r]=n,this.postChange(t,n,"instance_created"),n},_destroyInstance:function(e){var t,n;if(null===e||void 0===e)throw new TypeError("_destroyInstance(): Missing biid");return t=this.bundleInstances[e],n=t.mediator,n.bundle=null,n.manager=null,n.clazz=null,t.mediator=null,this.bundleInstances[e]=null,t=null},on:function(e,t,n){this.triggers.push(new c(e,t,n))}};var d=function(e){this.manager=e,this.bundles={},this.bundleInstances={},this.bundlePath="../src/mapframework/bundle/",this.appSetup=null,this.appConfig={}};d.prototype={getBundleInstanceConfigurationByName:function(e){return this.appConfig[e]},playBundle:function(e,t,n){if("object"!=typeof e)throw new Error("Bundle def is not an object");if("function"==typeof t&&(n=t,t=void 0),t){var r=e.bundleinstancename||e.bundlename,i={};i[r]=t,t=i}else t=this.appConfig;var o=Oskari.loader([e],t);o.processSequence(n)},setApplicationSetup:function(e){this.appSetup=e},getApplicationSetup:function(){return this.appSetup},setConfiguration:function(e){this.appConfig=e},getConfiguration:function(){return this.appConfig},startApplication:function(e){var t=Oskari.loader(this.appSetup.startupSequence,this.appConfig);t.processSequence(e)},stopApplication:function(){throw new Error("Not supported")}};var p=new f;p.clazz=u;var h=new d(p),g=u._global;u.define("Oskari.DomManager",function(e){
this.$=e},{getEl:function(e){return this.$(e)},getElForPart:function(e){throw"N/A"},setElForPart:function(e,t){throw"N/A"},setElParts:function(e){throw"N/A"},getElParts:function(){throw"N/A"},pushLayout:function(e){throw"N/A"},popLayout:function(e){throw"N/A"},getLayout:function(){throw"N/A"}});var m=u.create("Oskari.DomManager",jQuery);h.bundle_dom_manager=m;var v={bundle_manager:p,bundle_facade:h,app:h,clazz:u,VERSION:e,markers:[],$:function(){return g.apply(u,arguments)},setLoaderMode:function(e){if("string"!=typeof e)throw new TypeError("setLoaderMode(): m is not a string");i=e},getLoaderMode:function(){return i},setDebugMode:function(e){if("boolean"!=typeof e)throw new TypeError("setDebugMode(): d is not a boolean");t=e},setPreloaded:function(e){if("boolean"!=typeof e)throw new TypeError("setPreloaded(): usep is not a boolean");o=e},purge:function(){p.purge(),u.purge("Oskari")},getDomManager:function(){return m},setDomManager:function(e){m=e},getSandbox:function(e){return g.apply(u,[e||"sandbox"])},setSandbox:function(e,t){return g.apply(u,[e||"sandbox",t])},setMarkers:function(e){this.markers=e},getMarkers:function(){return this.markers||[]}},y=function(){var e={};return{get:function(t){return e[t]?e[t]+=1:e[t]=1,e[t]}}}();u.define("Oskari.ModuleSpec",function(e,t){this.cs=u,this.classInfo=e,this.className=t},{_slicer:Array.prototype.slice,category:function(e,t){var n=u.category(this.className,t||["__",y.get("Category")].join("_"),e);return this.classInfo=n,this},methods:function(e,t){var n=u.category(this.className,t||["__",y.get("Category")].join("_"),e);return this.classInfo=n,this},extend:function(e){var t;if(null===e||void 0===e)throw new TypeError("extend(): Missing clazz");return t=u.extend(this.className,e.length?e:[e]),this.classInfo=t,this},create:function(){return u.createWithClassInfo(this.classInfo,arguments)},name:function(){return this.className},metadata:function(){return u.getMetadata(this.className)},events:function(e){var t=this;return t.category({eventHandlers:e,onEvent:function(e){var t=this.eventHandlers[e.getName()];if(t)return t.apply(this,[e])}},"___events"),t},requests:function(e){var t=this;return t.category({requestHandlers:e,onRequest:function(e){var t=this.requestHandlers[e.getName()];return t?t.apply(this,[e]):void 0}},"___requests"),t},builder:function(){return u.getBuilderFromClassInfo(this.classInfo)}});var b=v;return b.cls=function(e,t,n,r){var i;return e?i=u.lookup(e):e=["Oskari","_",y.get("Class")].join("."),i&&i._constructor&&!t||(i=u.define(e,t||function(){},n,r||{})),u.create("Oskari.ModuleSpec",i,e)},b.loc=function(){return this.registerLocalization.apply(b,arguments)},b.eventCls=function(e,t,n){var r,i;if(null===e||void 0===e)throw new TypeError("eventCls(): Missing eventName");return r="Oskari.event.registry."+e,i=b.cls(r,t,n,{protocol:["Oskari.mapframework.event.Event"]}),i.category({getName:function(){return e}},"___event"),i.eventName=e,i},b.requestCls=function(e,t,n){var r,i;if(null===e||void 0===e)throw new TypeError("requestCls(): Missing requestName");return r="Oskari.request.registry."+e,i=b.cls(r,t,n,{protocol:["Oskari.mapframework.request.Request"]}),i.category({getName:function(){return e}},"___request"),i.requestName=e,i},b._baseClassFor={extension:"Oskari.userinterface.extension.EnhancedExtension",bundle:"Oskari.mapframework.bundle.extension.ExtensionBundle",tile:"Oskari.userinterface.extension.EnhancedTile",flyout:"Oskari.userinterface.extension.EnhancedFlyout",view:"Oskari.userinterface.extension.EnhancedView"},b.extensionCls=function(e){if(null===e||void 0===e)throw new TypeError("extensionCls(): Missing className");return b.cls(e).extend(this._baseClassFor.extension)},b.bundleCls=function(e,t){var n;if(null===t||void 0===t)throw new TypeError("bundleCls(): Missing className");return e||(e=["__",y.get("Bundle")].join("_")),n=b.cls(t,function(){},{update:function(){}},{protocol:["Oskari.bundle.Bundle",this._baseClassFor.bundle],manifest:{"Bundle-Identifier":e}}),p.installBundleClassInfo(e,n.classInfo),n.___bundleIdentifier=e,n.loc=function(e){return e.key=this.___bundleIdentifier,b.registerLocalization(e),n},n.start=function(e){var t,n,r,i,o=this.___bundleIdentifier;if(h.bundles[o]||(t=p.createBundle(o,o),h.bundles[o]=t),n=p.createInstance(o),h.bundleInstances[o]=n,r=h.getBundleInstanceConfigurationByName(o))for(i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n.start(),n},n.stop=function(){var e=h.bundleInstances[this.___bundleIdentifier];return e.stop()},n},b.flyoutCls=function(e){if(null===e||void 0===e)throw new TypeError("flyoutCls(): Missing className");return b.cls(e).extend(this._baseClassFor.flyout)},b.tileCls=function(e){if(null===e||void 0===e)throw new TypeError("tileCls(): Missing className");return b.cls(e).extend(this._baseClassFor.tile)},b.viewCls=function(e){if(null===e||void 0===e)throw new TypeError("viewCls(): Missing className");return b.cls(e).extend(this._baseClassFor.view)},g.apply(u,["Oskari",v]),v}(),function(e){var t=null,n=null,r={},i=null;e.setSupportedLocales=function(e){if(null===e||void 0===e)throw new TypeError("setSupportedLocales(): Missing locales");if(!Array.isArray(e))throw new TypeError("setSupportedLocales(): locales is not an array");i=e},e.getSupportedLocales=function(){return i||[]},e.setLang=function(e){if(null===e||void 0===e)throw new TypeError("setLang(): Missing lang");t=e},e.getLang=function(){return t},e.getSupportedLanguages=function(){var t,n,r=[],i=e.getSupportedLocales();for(n=0;n<i.length;n+=1)t=i[n],r.push(t.substring(0,t.indexOf("_")));return r},e.getDefaultLanguage=function(){var n=e.getSupportedLocales();if(0===n.length)return console&&console.warn&&console.warn("Supported locales not set, using current language "+this.getLang()),t;var r=n[0];return-1!==r.indexOf("_")?r.substring(0,r.indexOf("_")):t};var o=function(e,t,n){if(null===e||void 0===e)throw new TypeError("setLocalization(): Missing lang");if(null===t||void 0===t)throw new TypeError("setLocalization(): Missing key");r[e]||(r[e]={}),r[e][t]=n};e.getLocalization=function(e,i,o){var s=i||t;if(null===e||void 0===e)throw new TypeError("getLocalization(): Missing key");return r?r[s]&&r[s][e]?r[s][e]:o&&r[n]&&r[n][e]?r[n][e]:null:null},e.registerLocalization=function(t,n){var r,i,s;if(null===t||void 0===t)throw new TypeError("registerLocalization(): Missing props");if(t.length)for(r=0;r<t.length;r+=1)i=t[r],n&&n===!0?(i.key&&i.lang&&(s=e.getLocalization(i.key,i.lang)),s&&null!==s&&(i.value=jQuery.extend(!0,{},s,i.value))):(i.key&&i.lang&&(s=e.getLocalization(i.key,i.lang)),s&&null!==s&&(i.value=jQuery.extend(!0,{},i.value,s))),o(i.lang,i.key,i.value);else n&&n===!0?(t.key&&t.lang&&(s=e.getLocalization(t.key,t.lang)),s&&null!==s&&(t.value=jQuery.extend(!0,{},s,t.value))):(t.key&&t.lang&&(s=e.getLocalization(t.key,t.lang)),s&&null!==s&&(t.value=jQuery.extend(!0,{},t.value,s))),o(t.lang,t.key,t.value)};var s=[];e.setDecimalSeparators=function(e){s=e},e.getDecimalSeparator=function(){var t=this,n=e.getLang(),r=e.getSupportedLocales().filter(function(e){return 0===e.indexOf(n)}),i=r.map(function(e){return t.getDecimalSeparators()[e]});return i.length>1&&console&&console.warn&&console.warn("Found more than one separator for "+this.getLang()),i.length&&i[0]?i[0]:","},e.getDecimalSeparators=function(){return s}}(Oskari),Oskari.util=function(){function e(e){return"string"==typeof e&&e.length>0&&"0"===e[0]?!(t.isDecimal(e)&&e.length>1&&"."===e[1]):!1}var t={};return t.isNumber=function(t,n){var r,i=new RegExp("^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$"),o=!0;if("object"==typeof t)for(r=0;r<t.length;r++){if(n&&n===!0&&e(t[r]+"")){o=!1;break}if(i.test(t[r])===!1){o=!1;break}}else o=n&&n===!0&&e(t+"")?!1:i.test(t);return o},t.isDecimal=function(t){var n,r,i,o=!0;if(!t||null===t||""===t)return!1;if("object"==typeof t)for(n=0;n<t.length&&(i=String(t[n]),r=i.split("."),o=!(2!==r.length||e(i)||isNaN(r[0])||isNaN(r[1])),o!==!1);n++);else i=t+"",r=i.split("."),o=2===r.length&&!isNaN(r[0])&&!isNaN(r[1])&&(e(r[0])&&1==r[0].length||!e(r[0]));return o},t.decimals=function(e){var t,n=0;if(!e||null===e||""===e||isNaN(e)&&"object"!=typeof e)return null;if("object"==typeof e){for(i=0;i<e.length;i++)t=e[i]+"",t=t.split("."),2===t.length&&n<t[1].length&&(n=t[1].length);return n}return t=e+"",t=t.split("."),2===t.length?t[1].length:0},t.hexToRgb=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},t.rgbToHex=function(e){if("#"===e.charAt(0))return e.substring(1);var t,n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);for(delete n[0],t=1;3>=t;t+=1)n[t]=parseInt(n[t],10).toString(16),1===n[t].length&&(n[t]="0"+n[t]);return n.join("")},t.keyExists=function(e,t){for(var n=e,r=0,i=t.split("."),o=0;n&&o<i.length;o++)i[o]in n&&(n=n[i[o]],r++);return r===i.length},t.naturalSort=function(e,t,n){var r,i,o=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,s=/^\s+|\s+$/g,a=/\s+/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,f=function(e){return(""+e).toLowerCase().replace(s,"")},d=f(e)||"",p=f(t)||"",h=d.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),g=p.replace(o,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(l),16)||1!==h.length&&Date.parse(d),v=parseInt(p.match(l),16)||m&&p.match(u)&&Date.parse(p)||null,y=function(e,t){return(!e.match(c)||1==t)&&parseFloat(e)||e.replace(a," ").replace(s,"")||0},b=function(e,t){return isNaN(e)!==isNaN(t)?(w=isNaN(e)?1:-1,!0):(typeof e!=typeof t&&(e+="",t+=""),t>e?(w=-1,!0):e>t?(w=1,!0):void 0)},w=0,x=!1;if(v&&(v>m?(w=-1,x=!0):m>v&&(w=1,x=!0)),!x)for(var _=0,E=h.length,C=g.length,k=Math.max(E,C);k>_&&(r=y(h[_]||"",E),i=y(g[_]||"",C),!(x=b(r,i)));_++);return n&&(w=-1*w),w},t}(),function(){var e=window.console,t=!1,n=function(t){var n=t.shift();e&&window.console[n]&&window.console[n].apply&&window.console[n].apply(window.console,t)},r=function(e,t){var n=Array.prototype.slice.call(t);return n.unshift(e),n},i=function(){if(!t)return"";var e=new Date;return e.toLocaleTimeString()+"."+e.getUTCMilliseconds()+" "},o=function(e,t,o,s,a){var u=i()+e+":",l=r(u,o);l=r(t,l),s&&a&&a.caller&&l.push(a.caller),n(l,a)},s=function(e,t,n){this.name=e||"Logger",this.isDebug=!!t,this.includeCaller=!!n};s.prototype.setInclCaller=function(e){this.includeCaller=!!e},s.prototype.enableDebug=function(e){this.isDebug=!!e},s.prototype.debug=function(){this.isDebug&&o(this.name,"debug",arguments,this.includeCaller,arguments.callee)},s.prototype.info=function(){o(this.name,"log",arguments,this.includeCaller,arguments.callee)},s.prototype.warn=function(){o(this.name,"warn",arguments,this.includeCaller,arguments.callee)},s.prototype.error=function(){o(this.name,"error",arguments,this.includeCaller,arguments.callee)};var a={};Oskari.log=function(e){if(e=e||"Oskari",a[e])return a[e];var t=new s(e);return a[e]=t,t}}(),function(e){if(e){var t={};e.bundle=function(e,n){return n&&(t[e]=n),t[e]}}}(Oskari),function(e){if(e){e.loader;var t=Oskari.log("Loader"),n=function(e,t,n){var r=document.head||document.body,i=document.createElement("link");i.rel=t||"stylesheet",i.type=n||"text/css",i.href=e,r.appendChild(i)},r=function(e,t){var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")},i=function(e,t){var n=t;return 0!==t.indexOf("/")&&(n=r(e,t)),n.split("//").join("/")},o=function(r,o){var s=[];r&&"function"==typeof r.slice?s=r.slice(0):t.warn("No startupsequence given to loader or sequence is not an array");var a=o||{},u={};return"dev"===e.getLoaderMode()&&require.config({urlArgs:"ts="+(new Date).getTime()}),{processSequence:function(e){var n=this;if(0===s.length)return void("function"==typeof e&&e());var r=s.shift();if("object"!=typeof r)return t.warn("StartupSequence item is a "+typeof r+" instead of object. Skipping"),void this.processSequence(e);if("object"!=typeof r.metadata||"object"!=typeof r.metadata["Import-Bundle"])return t.warn('StartupSequence item doesn\'t contain the structure item.metadata["Import-Bundle"]. Skipping ',r),void this.processSequence(e);var i=r.bundlename;if(!i)return t.warn("StartupSequence item doesn't contain bundlename. Skipping ",r),void this.processSequence(e);var o=r.bundleinstancename||i,u=a[o]||{},l=r.metadata["Import-Bundle"],c=[],f=[];for(var d in l){var p=l[d];if("object"==typeof p&&"string"==typeof p.bundlePath){var h=p.bundlePath+"/"+d,g=h+"/bundle.js";c.push(g.split("//").join("/")),f.push({id:d,path:h})}else t.warn("StartupSequence import doesn't contain bundlePath. Skipping! Item is "+i+" import is "+d)}return Oskari.bundle(i)?(t.debug("Bundle preloaded "+i),n.startBundle(i,u),void this.processSequence(e)):void require(c,function(){for(var r=0;r<arguments.length;++r)"undefined"!=typeof arguments[r]&&t.warn("Support for AMD-bundles is not yet implemented",arguments[r]);t.debug("Loaded bundles",f),n.processBundleJS(f,function(){n.startBundle(i,u),n.processSequence(e)})},function(r){t.error("Error loading bundles for "+i,r),n.processSequence(e)})},startBundle:function(e,n){var r=Oskari.bundle(e);if(!r)throw new Error("Bundle not loaded "+e);var i=r.clazz.create();if(!i)throw new Error("Couldn't create an instance of bundle "+e);i.mediator={bundleId:e};for(var o in n)i[o]=n[o];t.debug("Starting bundle "+e);try{i.start()}catch(s){throw new Error("Couldn't start bundle with id "+e+". Error was: "+s)}},processBundleJS:function(e,t){var n=this,r=[],i=function(e){var n=r.indexOf(e);r.splice(n,1),0===r.length&&t()};e.forEach(function(e){var t=Oskari.bundle(e.id);t.clazz&&t.metadata&&t.metadata.source&&(r.push(e.id),n.handleBundleLoad(e.path,t.metadata.source,function(){i(e.id)}))})},handleBundleLoad:function(e,r,o){var s=[];r.locales&&r.locales.forEach(function(t){if((!t.lang||t.lang===Oskari.getLang())&&t.src.endsWith(".js")){var n=i(e,t.src);s.push(n),t.expose&&(u[n]=t.expose)}}),r.resources&&r.resources.forEach(function(t){t.src.endsWith(".js")&&s.push(i(e,t.src))}),r.scripts&&r.scripts.forEach(function(t){var r=i(e,t.src);t.src.endsWith(".js")?(s.push(r),t.expose&&(u[r]=t.expose)):t.src.endsWith(".css")&&n(r)}),r.links&&r.links.forEach(function(t){"import"===t.rel.toLowerCase()&&n(i(e,t.href),t.rel,"text/html")}),require(s,function(){for(var e=0;e<arguments.length;++e)if("undefined"!=typeof arguments[e]){var n=u[s[e]];n?window[n]=arguments[e]:t.warn('Support for AMD-files is not yet implemented. Bundles need to have an "expose" statement in bundle.js to register libs as globals.',s[e])}o()},function(e){t.error("Error loading files",s,e),o()})}}};o.log=t,o.linkFile=n,e.loader=o}}(Oskari);