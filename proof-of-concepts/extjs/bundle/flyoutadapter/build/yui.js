/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:38:01 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.poc.extjs.bundle.FlyoutAdapterBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.facade=null;this.parts={};this._uimodules=[];this._uimodulesByName={};this.extensions=[];this.extensionsByName={}},{__name:"Oskari.poc.extjs.bundle.FlyoutAdapterBundleInstance",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){if(this.started){return}this.started=true;var a=Oskari.$("sandbox");this.sandbox=a;this.facade=Oskari.clazz.create("Oskari.poc.extjs.ui.OskariDIVManagerFacade",a,this,this.parts);Oskari.$("UI.facade",this.facade);a.register(this);for(p in this.eventHandlers){a.registerForEventByName(this,p)}},init:function(){return null},update:function(){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{},addExtensionModule:function(e,k,b,g,f,j,i){var n=this.sandbox;var d=n.getLanguage();var a=e.getName();var l=j.fi.title;var c={module:e,identifier:k,region:f,component:i};this._uimodules.push(c);this._uimodulesByName[k]=c;c.bundleInstance=g;if(c.module){if(c.component){c.initialisedComponent=this.getSandbox().register(c.module)}else{c.component=this.getSandbox().register(c.module)}}for(p in b){this.sandbox.registerForEventByName(e,p)}var m=Oskari.clazz.create("Oskari.poc.extjs.flyoutadapter.Extension",this,{name:a,title:l,description:"?"},c);this.extensions.push(m);this.extensionsByName[m.getName()]=m;var h=n.getRequestBuilder("userinterface.AddExtensionRequest")(m);n.request(this,h);console.log("FLYOUTADAPTER",m);return c},stop:function(){var b=this.sandbox;for(p in this.eventHandlers){b.unregisterFromEventByName(this,p)}var a=b.getRequestBuilder("userinterface.RemoveExtensionRequest");for(var d=0;d<this.extensions.length;d++){var c=a(this.extensions[d]);b.request(this,c)}this.extensions=[];this.extensionsByname={};b.request(this,c);this.sandbox.unregister(this);this.started=false}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module"]});Oskari.clazz.define("Oskari.poc.extjs.flyoutadapter.Flyout",function(a,b,c){this.instance=a;this.container=null;this.el=null;this.template=null;this.state=null;this.props=b;this.def=c},{getName:function(){return this.props.name},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){var a=this.def.component?[this.def.component]:[];this.el=Ext.create("Ext.panel.Panel",{renderTo:this.container,bodyBorder:false,bodyCls:"oskari",bodyStyle:{border:"1pt dashed #c0c0c0",padding:"16px",margin:"16px"},layout:"fit",width:636,height:420,items:a})},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.props.title},getDescription:function(){return this.props.description},getOptions:function(){},setState:function(a){},refresh:function(){}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.extjs.flyoutadapter.Tile",function(a,b,c){this.instance=a;this.container=null;this.template=null;this.props=b;this.def=c},{getName:function(){return this.props.name},setEl:function(c,b,a){this.container=c},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.props.title},getDescription:function(){},getOptions:function(){},setState:function(a){}},{protocol:["Oskari.userinterface.Tile"]});Oskari.clazz.define("Oskari.poc.extjs.flyoutadapter.Extension",function(a,b,c){this.instance=a;this.props=b;this.plugins={};this.def=c},{getName:function(){return this.props.name},setSandbox:function(a){this.sandbox=a},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.extjs.flyoutadapter.Flyout",this,this.props,this.def);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.extjs.flyoutadapter.Tile",this,this.props,this.def)},stopExtension:function(){this.def.bundleInstance.stop();this.def=null},getTitle:function(){return this.props.title},getDescription:function(){return this.props.description},getPlugins:function(){return this.plugins}});Oskari.clazz.define("Oskari.poc.extjs.ui.OskariDIVManagerFacade",function(a,b,c){this.sandbox=a;
this.manager=b;this.parts=c;this.additionalComponents=[]},{registerPart:function(a,b){this.parts[a]=b},getSandbox:function(){return this.sandbox},getManager:function(){return this.manager},getParts:function(){return this.parts},showUIComponent:function(b,a,e){var c=this.findUIComponentIndex(b);if(c!=-1){var d=this.additionalComponents[c];this.expandPart(d.region);if("S"===d.region){this.parts[d.region].setActiveTab(d.comp)}else{if(d.comp.expand){d.comp.expand(false)}}}},removeUIComponent:function(a){var b=this.findUIComponentIndex(a);if(b!=-1){var c=this.additionalComponents[b];this.parts[c.region].remove(c.comp);this.additionalComponents.splice(b,1)}},findUIComponentIndex:function(a){var c=-1;for(var b=0;b<this.additionalComponents.length;++b){var d=this.additionalComponents[b];if(d.ident==a){return b}}return -1},addUIComponent:function(b,a,d){this.parts[d].add(a);var c={ident:b,region:d,comp:a};this.additionalComponents[b]=c},appendExtensionModule:function(c,b,g,f,d,h,a){var e=this.manager.addExtensionModule(c,b,g,f,d,h,a);return e},removeExtensionModule:function(b,a,e,d,c){for(p in e){this.sandbox.unregisterFromEventByName(b,p)}this.sandbox.unregister(b)},collapseDirections:{N:Ext.Component.DIRECTION_TOP,E:Ext.Component.DIRECTION_RIGHT,S:Ext.Component.DIRECTION_BOTTOM,W:Ext.Component.DIRECTION_LEFT},collapsePart:function(a){if(this.parts.Drawer[a]){this.parts.Drawer[a].collapse(this.collapseDirections[a],false)}else{this.parts[a].collapse(true)}},expandPart:function(a){if(this.parts.Drawer[a]){this.parts.Drawer[a].expand(false)}else{this.parts[a].expand(true)}}},{protocol:["Oskari.mapframework.ui.manager.Facade"]});