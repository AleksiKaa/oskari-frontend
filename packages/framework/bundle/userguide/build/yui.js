/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 12:23:19 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.mapframework.bundle.userguide.UserGuideBundleInstance",function(){this.sandbox=null;this.started=false;this.plugins={};this.localization=null;this.ui=null;this._requestHandlers={};this.attachedToDefault=false},{templates:{userguide:'<div class="oskari-userguide"><span class="oskari-prompt"></span><br /><a target="_blank" href="http://www.google.fi/">Google</a></div>'},__name:"userinterface.UserGuide",getName:function(){return this.__name},setSandbox:function(a){this.sandbox=a},getSandbox:function(){return this.sandbox},getLocalization:function(a){if(a){return this._localization[a]}return this._localization},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;this._localization=Oskari.getLocalization(this.getName());var e=this.getLocalization("title");var d=Oskari.clazz.create("Oskari.userinterface.component.Popover",e,"");this.ui=d;d.setContent($(this.templates.userguide));a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}this._requestHandlers["userguide.ShowUserGuideRequest"]=Oskari.clazz.create("Oskari.mapframework.bundle.userguide.request.ShowUserGuideRequestHandler",a,this);a.addRequestHandler("userguide.ShowUserGuideRequest",this._requestHandlers["userguide.ShowUserGuideRequest"]);var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.createUi()},init:function(){return null},update:function(){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{"userinterface.ExtensionUpdatedEvent":function(b){var a=this;if(b.getExtension().getName()!=a.getName()){return}var c=b.getViewState()!="close";a.toggleUserInterface(c)}},toggleUserInterface:function(d,a){var b=this;var c=this.ui;if(!d){c.hide()}else{if(!b.attachedToDefault){var a=b.plugins["Oskari.userinterface.Tile"].getEl();c.setPlacement("right");c.attachTo(a);b.attachedToDefault=true}c.show()}},scheduleShowUserGuide:function(h){var k=this;var i=k.ui;var a=h.isToggle();if(a&&i.shown){k.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[this,"close"]);return}k.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[this,"attach"]);var b=jQuery(this.templates.userguide);var f=jQuery("<div />");var e=Oskari.getLang();var j=f.clone();j.append("Lang: "+e);b.append(j);var j=f.clone();j.append("Extension: "+h.getExtension());b.append(j);var j=f.clone();j.append("Context: "+h.getContext());b.append(j);var j=f.clone();j.append("Element: "+(h.getEl()?"YES":"NO"));b.append(j);var c=h.getEl();var g=h.getPlacement();if(g){i.setPlacement(g)}if(!c){if(!k.attachedToDefault){c=k.plugins["Oskari.userinterface.Tile"].getEl();i.attachTo(c);k.attachedToDefault=true}}else{i.hide();k.attachedToDefault=false;i.attachTo(c)}i.setContent(b)},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}a.removeRequestHandler("userguide.ShowUserGuideRequest",this._requestHandlers["userguide.ShowUserGuideRequest"]);var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},startExtension:function(){this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.mapframework.bundle.userguide.Tile",this,this.getLocalization("tile"))},stopExtension:function(){this.plugins["Oskari.userinterface.Tile"]=null},getPlugins:function(){return this.plugins},getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},createUi:function(){var a=this;this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.mapframework.bundle.userguide.request.ShowUserGuideRequest",function(b){var a=b||{};this._creator=null;this._el=a.el;this._context=a.context;this._extension=a.extension;this._toggle=a.toggle;this._placement=a.placement},{__name:"userguide.ShowUserGuideRequest",getName:function(){return this.__name
},getUuid:function(){return this._uuid},getContext:function(){return this._context},getExtension:function(){return this._extension},getEl:function(){return this._el},isToggle:function(){return this._toggle},getPlacement:function(){return this._placement}},{protocol:["Oskari.mapframework.request.Request"]});Oskari.clazz.define("Oskari.mapframework.bundle.userguide.request.ShowUserGuideRequestHandler",function(b,a){this.sandbox=b;this.instance=a},{handleRequest:function(a,b){this.sandbox.printDebug("[Oskari.mapframework.bundle.userguide.request.ShowUserGuideRequestHandler] Show UserGuide: "+b.getUuid());this.instance.scheduleShowUserGuide(b)}},{protocol:["Oskari.mapframework.core.RequestHandler"]});Oskari.clazz.define("Oskari.mapframework.bundle.userguide.Tile",function(b,a){this.instance=b;this.locale=a;this.container=null;this.template=null},{getName:function(){return"Oskari.mapframework.bundle.userguide.Tile"},setEl:function(d,c,a){this.container=jQuery(d);var b=this.container.children(".oskari-tile-status")},getEl:function(){return this.container},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.desciption},getOptions:function(){},refresh:function(){var e=this;var a=e.instance;var d=this.container;var c=this.template;var b=a.getSandbox()}},{protocol:["Oskari.userinterface.Tile"]});Oskari.registerLocalization({lang:"fi",key:"userinterface.UserGuide",value:{title:"Ohje",desc:"",flyout:{title:"Ohje"},tile:{title:"Ohje",}}});Oskari.registerLocalization({lang:"sv",key:"userinterface.UserGuide",value:{title:"Guide",desc:"",flyout:{title:"Guide"},tile:{title:"Guide",}}});Oskari.registerLocalization({lang:"en",key:"userinterface.UserGuide",value:{title:"Guide",desc:"",flyout:{title:"Guide"},tile:{title:"Guide",}}});