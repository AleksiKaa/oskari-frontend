<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: state/StateHandler.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: state/StateHandler.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * StateHandler for immutable UI state handling.
 */
export class StateHandler {
    constructor () {
        this.stateListeners = [];
        this.state = {};
        this.stashedState = null;
    }
    /**
     * @returns {object} Current state
     */
    getState () {
        return this.state;
    }
    /**
     * @param {Object} state A new state replacing the previous one.
     */
    setState (state) {
        this.state = state;
        this.notify();
    }
    /**
     * @param {Object} props Extends and overrides keys in state.
     */
    updateState (props) {
        this.state = {
            ...this.state,
            ...props
        };
        this.notify();
    }
    /**
     * Stashes current state so it can be returned to later on.
     */
    stashCurrentState () {
        if (this.stashedState) {
            // Prevent accidentally overwriting stashed state.
            return;
        }
        this.stashedState = { ...this.state };
    }
    /**
     * To check if we have a state in stash.
     * @return {boolean} True, if we have state in stash.
     */
    hasStashedState () {
        return !!this.stashedState;
    }
    /**
     * Retain previously stashed state. Clears the stash.
     */
    useStashedState () {
        if (this.stashedState) {
            this.setState(this.stashedState);
        }
        this.stashedState = null;
    }
    /**
     * Register a listener function. Listeners will be called every time the state changes.
     * @param {function} consumer The consumer function.
     */
    addStateListener (consumer) {
        this.stateListeners.push(consumer);
    }
    /**
     * Handles calling registerd listeners.
     * @private
     */
    notify () {
        this.stateListeners.forEach(consumer => consumer(this.getState()));
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Mutator.html">Mutator</a></li><li><a href="StateHandler.html">StateHandler</a></li></ul><h3>Mixins</h3><ul><li><a href="mutatorMixin.html">mutatorMixin</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getMutator">getMutator</a></li><li><a href="global.html#LocaleContext">LocaleContext</a></li><li><a href="global.html#withLocale">withLocale</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Dec 11 2019 16:31:15 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
