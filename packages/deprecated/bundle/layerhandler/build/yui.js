/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 12:23:19 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.mapframework.request.common.AfterAddExternalMapLayerEvent",function(b,a,c){this._creator=null;this._mapLayerId=b;this._spec=a;this._layer=c},{__name:"AfterAddExternalMapLayerEvent",getName:function(){return this.__name},getMapLayerId:function(){return this._mapLayerId},getSpec:function(){return this._spec},getLayer:function(){return this._layer}},{protocol:["Oskari.mapframework.event.Event"]});Oskari.clazz.define("Oskari.mapframework.request.common.AfterRemoveExternalMapLayerEvent",function(a){this._creator=null;this._mapLayerId=a},{__name:"AfterRemoveExternalMapLayerEvent",getName:function(){return this.__name},getMapLayerId:function(){return this._mapLayerId}},{protocol:["Oskari.mapframework.event.Event"]});Oskari.clazz.define("Oskari.mapframework.request.common.AddExternalMapLayerRequest",function(b,a,c){this._creator=null;this._mapLayerId=b;this._spec=a;this._sldSpec=c},{__name:"AddExternalMapLayerRequest",getName:function(){return this.__name},getMapLayerId:function(){return this._mapLayerId},getSpec:function(){return this._spec},getSLDSpec:function(){return this._sldSpec}},{protocol:["Oskari.mapframework.request.Request"]});Oskari.clazz.define("Oskari.mapframework.request.common.RemoveExternalMapLayerRequest",function(a){this._creator=null;this._mapLayerId=a},{__name:"RemoveExternalMapLayerRequest",getName:function(){return this.__name},getMapLayerId:function(){return this._mapLayerId}},{protocol:["Oskari.mapframework.request.Request"]});Oskari.clazz.define("Oskari.mapframework.bundle.AddExternalMapLayerHandler",function(a){this.sandbox=a},{handleRequest:function(b,g){var d=g.getMapLayerId();var c=g.getSpec();var h=[c];b.createMapLayerDomain({layers:h});var a=b.getService("Oskari.mapframework.service.MapLayerService");var e=a.findMapLayer(d);this.sandbox.printDebug("###!!### Added Layer Spec @AddExternalMapLayerHandler");var f=this.sandbox.getEventBuilder("AfterAddExternalMapLayerEvent")(d,c,e);this.sandbox.notifyAll(f)}},{protocol:["Oskari.mapframework.core.RequestHandler"]});Oskari.clazz.define("Oskari.mapframework.bundle.RemoveExternalMapLayerHandler",function(a){this.sandbox=a},{handleRequest:function(a,d){var b=d.getMapLayerId();this.sandbox.printDebug("###!!### Leaving Layer Spec "+b+" TO core._allAvailableLaeyrs FIXIT! / @RemoveExternalMapLayerHandler");var c=this.sandbox.getEventBuilder("AfterRemoveExternalMapLayerEvent")(b);this.sandbox.notifyAll(c)}},{protocol:["Oskari.mapframework.core.RequestHandler"]});Oskari.clazz.define("Oskari.mapframework.bundle.LayerHandlerBundleInstance",function(a){this.name="layerhandlerModule";this.mediator=null;this.sandbox=null},{start:function(){if(this.mediator.getState()=="started"){return}var a=Oskari.$("sandbox");this.sandbox=a;this.handlers={addExternalMapLayer:Oskari.clazz.create("Oskari.mapframework.bundle.AddExternalMapLayerHandler",a),removeExternalMapLayer:Oskari.clazz.create("Oskari.mapframework.bundle.RemoveExternalMapLayerHandler",a)};this.sandbox.addRequestHandler("AddExternalMapLayerRequest",this.handlers.addExternalMapLayer);this.sandbox.addRequestHandler("RemoveExternalMapLayerRequest",this.handlers.removeExternalMapLayer);this.mediator.setState("started");return this},init:function(a){this.sandbox=a;return null},update:function(d,a,c,e){d.alert("RECEIVED update notification @BUNDLE_INSTANCE: "+e)},stop:function(){this.sandbox.removeRequestHandler("AddExternalMapLayerRequest",this.handlers.addExternalMapLayer);this.sandbox.removeRequestHandler("RemoveExternalMapLayerRequest",this.handlers.removeExternalMapLayer);this.sandbox=null;this.mediator.setState("stopped");return this},onEvent:function(a){return this.eventHandlers[a.getName()].apply(this,[a])},eventHandlers:{AfterMapMoveEvent:function(a){var c=a.getCenterY();var b=a.getCenterX();this.ui.updateLocationInfo(c,b);this.mediator.manager.alert("AfterMapMoveEvent "+c+","+b+" @Oskari.mapframework.bundle.LayerHandlerBundleInstance "+a.getName())}},getName:function(){return this.__name},__name:"Oskari.mapframework.bundle.LayerHandlerBundleInstance"},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.mapframework.bundle.extension.Extension","Oskari.mapframework.bundle.extension.EventListener"]});