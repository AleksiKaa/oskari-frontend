/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 12:02:04 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.poc.dojo.bundle.FeatureInfoBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.template=null;this.plugins={};this.dojo=null},{__name:"DojoFeatureInfo",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.mediator.bundle.require(function(d){c.dojo=d;c.plugins["Oskari.userinterface.Flyout"].setDojo(c.dojo);c.plugins["Oskari.userinterface.Tile"].setDojo(c.dojo);c.refresh()})},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapLayerAddEvent:function(a){this.plugins["Oskari.userinterface.Flyout"].handleMapLayerAdded(a);this.plugins["Oskari.userinterface.Tile"].handleMapLayerAdded(a)},AfterMapLayerRemoveEvent:function(a){this.plugins["Oskari.userinterface.Flyout"].handleMapLayerRemoved(a);this.plugins["Oskari.userinterface.Tile"].handleMapLayerRemoved(a)},AfterMapMoveEvent:function(a){},AfterChangeMapLayerOpacityEvent:function(a){if(this.sandbox.getObjectCreator(a)!=this.getName()){this.afterChangeMapLayerOpacityEvent(a)}}},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.dojo.featureinfo.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.dojo.featureinfo.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins},refresh:function(){var a=this;if(!a.dojo){return}this.plugins["Oskari.userinterface.Flyout"].refresh();this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.dojo.featureinfo.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null;this.dojo=null},{setDojo:function(a){this.dojo=a},getName:function(){return"Oskari.poc.dojo.featureinfo.Flyout"},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},handleMapLayerAdded:function(a){},handleMapLayerRemoved:function(a){},refresh:function(){var e=this;var f=e.dojo["dojo/query"];var d=e.dojo.dojo;var b=e.dojo["dojo/dom-construct"];var g=e.dojo["dojo/dom"];var e=this;var c=d.query(this.container);console.log("DOJO",c);var a=e.instance.getSandbox();b.empty(c);var h=b.create("div",{className:"grid",id:"grid-module",style:{width:"400px",height:"300px",background:"white"}},this.container);e.createGrid(h,"dojo/io/script",e.dojo["dojox/grid/DataGrid"],e.dojo["dojo/store/Memory"],e.dojo["dojo/data/ObjectStore"],e.dojo["dojo/_base/xhr"])},createGrid:function(g,d,h,e,c,i){var f=new e({data:[{id:"sami1",name:"tieto1"},{id:"sami2",name:"tieto2"}]});var b=new c({objectStore:f});var a=new h({store:b,style:{width:"100%",height:"200px"},structure:[{name:"ID",field:"id",width:"50%"},{name:"Nimi",field:"name",width:"50%"}]},g);a.startup()}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.dojo.featureinfo.Tile",function(a){this.instance=a;this.container=null;this.template=null;this.dojo=null
},{setDojo:function(a){this.dojo=a},getName:function(){return"Oskari.poc.dojo.featureinfo.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Kohdetiedot"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},handleMapLayerAdded:function(a){},handleMapLayerRemoved:function(a){},refresh:function(){var f=this;var a=f.instance;var e=this.container;var d=this.template;var c=a.getSandbox();var g=c.findAllSelectedMapLayers();var b=e.children(".oskari-tile-status")}},{protocol:["Oskari.userinterface.Tile"]});