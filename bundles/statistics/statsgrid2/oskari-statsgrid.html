<link rel="import"
      href="libs/polymer/polymer.html">

<link href="libs/vaadin-components/vaadin-components.html" rel="import">

<dom-module id="oskari-statsgrid">

  <template>
    <iron-ajax
    auto
    url="{{ajaxUrl}}"
    params="[[getParams(selectedIndicators)]]"
    handle-as="json"
    last-response="{{sources}}"
    debounce-duration="300"
    on-response="handleResponse"
    id="indicatorsAjax"></iron-ajax>
    <div id="municipalGrid" class="municipal-grid">
      <vaadin-grid selection-mode="multi">
        <table>
          <!-- Define the columns -->
          <col name="region" header-text="{{selectedLayer}}" width="48">
          <template is="dom-repeat" items="{{indicatorHeaders}}">
            <col name="{{item.id}}" header-text="{{item.header}}" width="54">
          </template>
        </table>
      </vaadin-grid>
      <content></content>
    </div>
  </template>

  <script>
    Polymer({
      is: "oskari-statsgrid",
      properties: {
          "selectedLayer": String,
          "layers": Array,
          "indicatorHeaders": Array,
          "rows": Array
      },
      getParams: function(selectedIndicators) {
          return {
              "action_route": "GetIndicatorData"
          };
      }
    });
  </script>

</dom-module>

