<link rel="import"
      href="libs/polymer/polymer.html">

<dom-module id="oskari-grid">

  <template>
    <table class="oskari-grid" id="oskariGrid" style="margin: 0px; overflow-x: scroll; display: block; max-width: 450px;">
      <thead class="oskari-grid-width" id="oskari-grid-header" style="">
        <tr class="oskari-grid-width">
          <template is="dom-if" if="[[selection]]">
            <th><input type="checkbox" checked="{{allSelected::change}}" on-change="allSelectedChanged"
                id="allSelectedCheckbox"></input></th>
          </template>
          <template is="dom-repeat" items="[[headers]]" as="header" id="headersTemplate">
            <th>
              <span on-tap="onSort" index="[[index]]" header="[[header]]">[[header.title]]</span>
              <template is="dom-if" if="[[filtering]]">
                <template is="dom-if" if="[[header.filter]]">
                  <div on-tap="onFilter" class="icon-funnel" title="[[onFilterTitle]]"
                    index="[[index]]" header="[[header]]"></div>
                </template>
              </template>
              <template is="dom-if" if="[[deleting]]">
                <template is="dom-if" if="[[header.delete]]">
                  <div on-tap="onDelete" class="icon-close-dark statsgrid-remove-indicator"
                    title="[[onDeleteTitle]]" index="[[index]]" header="[[header]]"></div>
                </template>
              </template>
            </th>
          </template>
        </tr>
      </thead>
      <tbody class="oskari-grid-width" style="padding: 0px; border: 0px;">
        <tr class="oskari-grid-width" id="statisticsContainer">
          <td colspan$="[[numcols]]" class="oskari-grid-width">
            <button on-click="toggleStats">Statistics</button>
          </td>
        </tr>
        <tr class="oskari-grid-width"><td colspan$="[[numcols]]" class="oskari-grid-width" style="padding: 0px; border: 0px;">
          <iron-collapse id="statscollapse">
            <table id="oskari-grid-statistics" class="oskari-grid-width" style="display: block;">
              <template is="dom-repeat" items="{{statsrows}}" as="statsrow" id="statsRowsTemplate">
                <tr class="oskari-grid-width">
                  <template is="dom-repeat" items="[[statsrow.data]]" as="datum">
                    <td>
                      <span>[[datum]]</span>
                    </td>
                  </template>
                </tr>
              </template>
            </table>
          </iron-collapse>
        </td></tr>
      </tbody>
      <tbody class="oskari-grid-width" id="oskari-grid-body" style="display: block; overflow-y: scroll; overflow-x: hidden;">
        <template is="dom-repeat" items="{{rows}}" as="row" id="rowsTemplate">
          <tr class="oskari-grid-width">
            <template is="dom-if" if="[[selection]]">
              <td style="width: 41px;"><input type="checkbox" checked="{{row.selected::change}}" on-change="selectionsChanged"></input></td>
            </template>
            <template is="dom-repeat" items="[[row.data]]" as="datum">
              <td>
                <span>[[datum]]</span>
              </td>
            </template>
          </tr>
        </template>
      </tbody>
    </table>
    <content></content>
  </template>

  <script src="oskari-grid.js">
  </script>

</dom-module>

