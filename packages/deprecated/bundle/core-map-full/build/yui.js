/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 12:23:19 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.category("Oskari.mapframework.core.Core","search-methods",{handleSearchRequest:function(b){this.printDebug("Doing search '"+b.getSearchString()+"'...");this.actionInProgressSearch();var a=this.getService("Oskari.mapframework.service.SearchService");a.doSearch(b.getSearchString(),b.getOnSuccess(),b.getOnComplete())}});Oskari.clazz.category("Oskari.mapframework.core.Core","wizard-methods",{handleHideWizardRequest:function(b){var a=this.getEventBuilder("AfterHideWizardEvent")(b.getWizardName());this.dispatch(a)},handleShowWizardRequest:function(b){var a=this.getEventBuilder("AfterShowWizardEvent")(b.getWizardName());this.dispatch(a)}});Oskari.clazz.category("Oskari.mapframework.core.Core","mapasker-methods",{handleShowNetServiceCentreRequest:function(b){var a=this.getEventBuilder("AfterShowNetServiceCentreEvent")();this.dispatch(a)},handleHideNetServiceCentreRequest:function(b){var a=this.getEventBuilder("AfterHideNetServiceCentreEvent")();this.dispatch(a)},handleHighlightWFSFeatureRequest:function(a){var b=this.getService("Oskari.mapframework.service.OgcSearchService");b.scheduleWFSMapHighlightUpdate(a)},handleHighlightWFSFeatureRequestByGeoPoint:function(request){if(!this.getSandbox().getMap().isMoving()){var core=this;var mapWidth=core.getSandbox().getMap().getWidth();var mapHeight=core.getSandbox().getMap().getHeight();var parameters=request.getWFSFeatureParameters();var ogcSearchService=this.getService("Oskari.mapframework.service.OgcSearchService");var highlighted=this.getAllHighlightedMapLayers();if(highlighted.length!=1){throw"Trying to highlight WFS feature but there is either too many or none selected WFS layers. Size: "+highlighted.length}var layer=highlighted[0];if(!layer.isLayerOfType("WFS")){throw"Trying to highlight WFS feature from map layer that is not WFS layer!"}if(!layer.isInScale()){core.printDebug("Trying to hightlight WFS feature from wfs layer that is not in scale!");return}var keepCollection=this.isCtrlKeyDown();var onReady=function(response){if(response.error=="true"){core.printWarn("Error while highlight data from table.")}var selectedFeatures=eval("("+response.selectedFeatures+")");var featureIds=[];if(selectedFeatures!=null&&selectedFeatures.id!=null){featureIds=selectedFeatures.id}var event=core.getEventBuilder("AfterHighlightWFSFeatureRowEvent")(featureIds,true,layer,keepCollection);core.copyObjectCreatorToFrom(event,request);core.dispatch(event)};ogcSearchService.processGetFeatureTypeIdsJsonForTableFormat(parameters,onReady,mapWidth,mapHeight)}},getLatestWfsTableQueryId:function(){return this._wfsTableQueryId},generateWfsTableQueryId:function(){this._wfsTableQueryId++;return this._wfsTableQueryId}});Oskari.clazz.category("Oskari.mapframework.core.Core","net-service-center-methods",{handleNetServiceCenterRequest:function(b){this.printDebug("Handling NetServiceCenter request '"+b.getActionKey()+"'...");var a=this;var c=function(e){var f=a.getEventBuilder("AfterNetServiceCenterRequestEvent")(b.getActionKey(),e,b.getSelectedData());a.copyObjectCreatorToFrom(f,b);a.dispatch(f)};var d=this.getService("Oskari.mapframework.service.NetServiceCenterService");d.doRequest(b.getActionKey(),b.getParamMap(),c)},handleUpdateNetServiceCentreRequest:function(b){var a=core.getEventBuilder("AfterUpdateNetServiceCentreEvent")();this.copyObjectCreatorToFrom(a,b);this.dispatch(a)}});