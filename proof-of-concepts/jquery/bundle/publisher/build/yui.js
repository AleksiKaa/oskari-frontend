/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:38:01 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.poc.jquery.bundle.PublisherBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.template=null;this.plugins={};this.yuilibrary=null},{__name:"PublisherWizard",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;this.localization=Oskari.getLocalization(this.getName());a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.mediator.bundle.require(function(){c.refresh()})},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapLayerAddEvent:function(a){},AfterMapLayerRemoveEvent:function(a){},AfterMapMoveEvent:function(a){},AfterChangeMapLayerOpacityEvent:function(a){if(this.sandbox.getObjectCreator(a)!=this.getName()){this.afterChangeMapLayerOpacityEvent(a)}}},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.jquery.publisher.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.jquery.publisher.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return this.localization.title},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins},refresh:function(){var a=this;this.plugins["Oskari.userinterface.Flyout"].refresh();this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.jquery.publisher.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.templateTab=null;this.tabCount=0;this.currentTab=1;this._widths=null;this.state=null},{getName:function(){return"Oskari.poc.jquery.publisher.Flyout"},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){this.template=jQuery('<div id="wizard"><div id="wizard_steps"><form></form></div><div id="wizard_navigation" style="display:none;"><ul></ul></div>');this.templateTab=jQuery('<fieldset class="wizard_step"></fieldset>')},stopPlugin:function(){},getTitle:function(){return this.instance.localization.title},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},refresh:function(){var e=this;var b=e.instance.getSandbox();jQuery(e.container).empty();var g=jQuery('<div id="wizard"></div>');var d=jQuery('<div id="wizard_steps"></div>');var c=jQuery('<form id="wizard_formElem"></form>');var f=jQuery('<div id="wizard_navigation" style="display:none;"></div>');var a=jQuery("<ul></ul>");g.append(f);g.append(d);d.append(c);f.append(a);c.append(this.createTab(this.instance.localization.steps.step1.title,this.instance.localization.steps.step1.content));a.append(jQuery('<li><a href="#" class="selected">'+this.instance.localization.steps.step1.tab+"</a></li>"));c.append(this.createTab(this.instance.localization.steps.step2.title,this.instance.localization.steps.step2.content));a.append(jQuery('<li><a href="#">'+this.instance.localization.steps.step2.tab+"</a></li>"));c.append(this.createTab(this.instance.localization.steps.step3.title,this.instance.localization.steps.step3.content));a.append(jQuery('<li><a href="#">'+this.instance.localization.steps.step3.tab+"</a></li>"));jQuery(e.container).append(g);this.tabCount=3;this.calculateWidths();this.bindNavigation()},createTab:function(b,a){var c=jQuery('<fieldset class="wizard_step"></fieldset>');
c.append(jQuery("<legend>"+b+"</legend>"));c.append("<p>"+a+" </p>");return c},calculateWidths:function(){var a=0;var b=new Array();jQuery("#wizard_steps .wizard_step").each(function(d){var c=jQuery(this);b[d]=a;a+=c.width()});jQuery("#wizard_steps").width(a);this._widths=b;jQuery("#wizard_navigation").show()},bindNavigation:function(){var a=this;jQuery("#wizard_navigation a").bind("click",function(d){var c=jQuery(this);var b=a.currentTab;c.closest("ul").find("li").removeClass("selected");c.parent().addClass("selected");a.currentTab=c.parent().index()+1;jQuery("#wizard_steps").stop().animate({marginLeft:"-"+a._widths[a.currentTab-1]+"px"},500,function(){jQuery("#wizard_formElem").children(":nth-child("+parseInt(a.currentTab)+")").find(":input:first").focus()});d.preventDefault()})}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.jquery.publisher.Tile",function(a){this.instance=a;this.container=null;this.template=null},{getName:function(){return"Oskari.poc.jquery.publisher.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.instance.localization.title},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},refresh:function(){var e=this;var a=e.instance;var d=this.container;var c=this.template;var b=a.getSandbox();var f=b.findAllSelectedMapLayers()}},{protocol:["Oskari.userinterface.Tile"]});