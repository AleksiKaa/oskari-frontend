/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:28:45 GMT+0300 (Suomen kes√§aika)) */ 
Oskari.clazz.define("Oskari.poc.kendoui.bundle.LayerSelectorBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.plugins={}},{__name:"Oskari.poc.kendoui.bundle.LayerSelectorBundleInstance",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){if(this.started){return}this.started=true;var a=Oskari.$("sandbox");this.sandbox=a;a.register(this);for(p in this.eventHandlers){a.registerForEventByName(this,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b)},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapMoveEvent:function(a){}},stop:function(){var a=this.sandbox;for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.kendoui.layerselector.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.kendoui.layerselector.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.kendoui.layerselector.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null},{getName:function(){return"Oskari.poc.kendoui.layerselector.Flyout"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.template=$('<div class="tree"></div>');this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},refresh:function(){var h=this;var a=h.instance;var g=this.container;var d=this.template;var b=a.getSandbox();g.empty();var f=$(d).clone();$(f).appendTo(g);var e=$(f).kendoGrid({dataSource:{type:"odata",transport:{read:"http://demos.kendoui.com/service/Northwind.svc/Employees"},pageSize:6,serverPaging:true,serverSorting:true},height:450,sortable:true,pageable:true,detailInit:c,dataBound:function(){this.expandRow(this.tbody.find("tr.k-master-row").first())},columns:[{field:"FirstName",title:"First Name"},{field:"LastName",title:"Last Name"},{field:"Country"},{field:"City"},{field:"Title"}]});function c(i){$("<div/>").appendTo(i.detailCell).kendoGrid({dataSource:{type:"odata",transport:{read:"http://demos.kendoui.com/service/Northwind.svc/Orders"},serverPaging:true,serverSorting:true,serverFiltering:true,pageSize:6,filter:{field:"EmployeeID",operator:"eq",value:i.data.EmployeeID}},scrollable:false,sortable:true,pageable:true,columns:["OrderID","ShipCountry","ShipAddress","ShipName"]})}}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.kendoui.layerselector.Tile",function(a){this.instance=a;this.container=null;this.template=null},{getName:function(){return"Oskari.poc.kendoui.layerselector.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},refresh:function(){var e=this;var a=e.instance;var d=this.container;var c=this.template;var b=a.getSandbox();var f=b.findAllSelectedMapLayers()}},{protocol:["Oskari.userinterface.Tile"]});