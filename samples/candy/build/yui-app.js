/* This is a packed Oskari app (bundle script version Thu May 31 2012 13:08:29 GMT+0300 (Suomen kesäaika)) */ 
/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 13:08:29 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.mapframework.bundle.Candy1BundleInstance",function(){this.map=null},{getSandbox:function(){return this.sandbox},createModulesAndUi:function(h){var j=false;var g=true;var c=true;var d=true;var b=Oskari.clazz.create("Oskari.mapframework.ui.module.common.MapModule","Candy1",j,g,c,d);this.mapmodule=b;var a=h.register(b);a.render("map-div");if(this.conf.plugins){var e=this.conf.plugins;for(var f=0;f<e.length;f++){e[f].instance=Oskari.clazz.create(e[f].id,e[f].config);b.registerPlugin(e[f].instance);b.startPlugin(e[f].instance)}}this.map=a},start:function(){var f=this;var e=f.conf;var b=Oskari.clazz.create("Oskari.mapframework.core.Core");var j=b.getSandbox();this.sandbox=j;var h=[];h.push(Oskari.clazz.create("Oskari.mapframework.service.LanguageService",Oskari.getLang()));h.push(Oskari.clazz.create("Oskari.mapframework.service.MapLayerService",j));var k=[];b.init(h,k);var d=j.getService("Oskari.mapframework.service.MapLayerService");var a=e.layers;if(a){for(var c=0;c<a.length;c++){var g=d.createMapLayer(a[c]);d.addLayer(g,true)}}this.createModulesAndUi(b.getSandbox());j.registerAsStateful(this.mediator.bundleId,this);this.setState(this.state)},getSandbox:function(){return this.sandbox},update:function(){},stop:function(){this.sandbox.unregisterStateful(this.mediator.bundleId);alert("Stopped!")},setState:function(a){var h=this.mapmodule;if(a.selectedLayers){var f=this.sandbox.getRequestBuilder("AddMapLayerRequest");var j=this.sandbox.getRequestBuilder("ChangeMapLayerOpacityRequest");var c=this.sandbox.getRequestBuilder("MapModulePlugin.MapLayerVisibilityRequest");var d=this.sandbox.getRequestBuilder("ChangeMapLayerStyleRequest");var g=a.selectedLayers.length;for(var b=0;b<g;++b){var e=a.selectedLayers[b];this.sandbox.request(h.getName(),f(e.id,true));if(e.hidden){this.sandbox.request(h.getName(),c(e.id,false))}if(e.style){this.sandbox.request(h.getName(),d(e.id,e.style))}if(e.opacity){this.sandbox.request(h.getName(),j(e.id,e.opacity))}}}if(a.east){this.sandbox.getMap().moveTo(a.east,a.north,a.zoom)}this.sandbox.syncMapState(true)},getState:function(){var b=this.sandbox.getMap();var d=this.sandbox.findAllSelectedMapLayers();var j=b.getZoom();var h=b.getX();var a=b.getY();var c={north:a,east:h,zoom:b.getZoom(),selectedLayers:[]};for(var f=0;f<d.length;f++){var g=d[f];var e={id:g.getId(),opacity:g.getOpacity()};if(!g.isVisible()){e.hidden=true}if(g.getCurrentStyle&&g.getCurrentStyle()&&g.getCurrentStyle().getName()&&g.getCurrentStyle().getName()!="!default!"){e.style=g.getCurrentStyle().getName()}c.selectedLayers.push(e)}return c}},{protocol:["Oskari.bundle.BundleInstance","Oskari.userinterface.Stateful"]});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 13:08:29 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.tools.Yui",function(){this.bundle_manager=Oskari.bundle_manager;this.excludeTags={mapframework:true},this.langs={fi:true,sv:true,en:true},this.flushPackFiles()},{flushPackFiles:function(){this.packedFiles=[];this.packedLocales={};for(l in this.langs){this.packedLocales[l]=[]}},setExcludeTags:function(a){this.excludeTags=a},getBundleTags:function(a){return this.bundle_manager.stateForBundleDefinitions[a].metadata.manifest["Bundle-Tag"]||{}},shallExclude:function(a){var b=this;var c=b.excludeTags;for(p in a){if(c[p]){return true}}return false},defaultCompressorJar:'"../tools/bundle/yui/yuicompressor-2.4.6.jar"',yui_command_line:function(j,k,g){var i=this;var c=i.bundle_manager.sources[j];var m="";m+="md build\n";var f="bundle.js";m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js "+f+" > build/bundle-yui.js\n";m+="echo /* This is a packed Oskari bundle (bundle script version "+(new Date())+") */ > build/yui.js\n";m+="echo /* This is a unpacked Oskari bundle (bundle script version "+(new Date())+") */ > build/yui-pack.js\n";for(var d=0;d<c.scripts.length;d++){var b=c.scripts[d];var a=new String(b.src);var e="text/javascript"==b.type?"js":"css";if("css"==e){continue}while(a.indexOf("/")!=-1){a=a.replace("/","\\")}m+='type "'+a+'" >> build/yui-pack.js\n'}m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js build/yui-pack.js >> build/yui.js\n";this.packedFiles.push(g+"/build/yui.js");for(l in this.langs){if(!this.langs[l]){continue}m+="echo /* This is a unpacked Oskari bundle (bundle script version "+(new Date())+") */ > build/yui-pack-locale-"+l+".js\n"}if(c.locales){for(var d=0;d<c.locales.length;d++){var b=c.locales[d];var h=b.lang;var a=new String(b.src);var e="text/javascript"==b.type?"js":"css";if("css"==e){continue}while(a.indexOf("/")!=-1){a=a.replace("/","\\")}m+='type "'+a+'" >> build/yui-pack-locale-'+h+".js\n"}}for(l in this.langs){if(!this.langs[l]){continue}m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js build/yui-pack-locale-"+l+".js >> build/yui-locale-"+l+".js\n";this.packedLocales[l].push(g+"/build/yui-locale-"+l+".js")}return m},yui_command_lines:function(a){var d=this;var c={};for(bndlName in d.bundle_manager.sources){var f=d.getBundleTags(bndlName);if(d.shallExclude(f)){continue}var b=Oskari.bundle_manager.stateForBundleDefinitions[bndlName].bundlePath;var e="";e+='pushd "'+b+'"\n';e+=d.yui_command_line(bndlName,a,b);e+="popd\n";c[bndlName]=e}return c},yui_command_line_for_app:function(h){var g=this;g.flushPackFiles();var f="SET CURRENT=%CD%\n";var d="SET YUICOMPRESSOR=%CURRENT%/"+this.defaultCompressorJar+"\n";var e=g.yui_command_lines(h);var c="";for(p in e){c+=e[p]}var i="";i+="md build\n";i+="echo /* This is a packed Oskari app (bundle script version "+(new Date())+") */ > build/yui-app.js\n";for(var b=0;b<this.packedFiles.length;b++){var a=this.packedFiles[b];while(a.indexOf("/")!=-1){a=a.replace("/","\\")}i+='type "'+a+'" >> build/yui-app.js\n'}for(l in this.langs){i+="echo /* This is a packed Oskari locale for app (bundle script version "+(new Date())+") */ > build/yui-app-locale-"+l+".js\n";for(var b=0;b<this.packedLocales[l].length;b++){var a=this.packedLocales[l][b];while(a.indexOf("/")!=-1){a=a.replace("/","\\")}i+='type "'+a+'" >> build/yui-app-locale-'+l+".js\n"}}return f+d+c+i},showYuiBuildCmd:function(){var a=this.yui_command_line_for_app("%YUICOMPRESSOR%");var b=window.open();b.document.write('<body ><pre style="font: 9pt Verdana;">'+a+"</body></pre>")}});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 13:08:29 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.mapframework.complexbundle.NlsFiLayerConfig",function(b){var a=b||{};a.userInterfaceLanguage=a.userInterfaceLanguage||"fi";this.conf=a},{create:function(){var a=this.conf;a.layers=this.sampleLayers;a.preSelectedLayers={preSelectedLayers:[{id:"base_27"}]};a.userInterfaceLanguage="fi";a.globalMapAjaxUrl="ajax.js?";a.globalPortletNameSpace="";a.imageLocation="../../map-application-framework";a.indexMapUrl="../resource/images/suomi25m_tm35fin.png";a.instructionsText="Ohjeet";a.instructionsUrl="http://www.google.fi";a.printUrl="../print/print.html";a.printWindowHeight=21*32;a.printWindowWidth=20*32;a.mapConfigurations={footer:true,scale:3,index_map:true,height:600,width:1000,plane_list:true,map_function:true,zoom_bar:true,north:"7204000",east:"552000",scala_bar:true,pan:true};return a},sampleLayers:{layers:[{wmsName:"ows:my_places_categories",descriptionLink:"",orgName:"XXX",type:"wmslayer",baseLayerId:11,legendImage:"http://tiuhti.nls.fi/geoserver/ows?",formats:{value:"text/plain"},isQueryable:false,id:33340,minScale:10000000,style:"",dataUrl:"",wmsUrl:"http://tiuhti.nls.fi/geoserver/ows?",name:"XXX",opacity:50,inspire:"Korkeus",maxScale:1},{wmsName:"rinnevalovarjostus",descriptionLink:"",orgName:"Geodeettinen laitos",type:"wmslayer",baseLayerId:11,legendImage:"http://217.152.180.24/cgi-bin/wms_rinnevalo?",formats:{value:"text/plain"},isQueryable:false,id:40,minScale:10000000,style:"",dataUrl:"",wmsUrl:"http://217.152.180.24/cgi-bin/wms_rinnevalo?&az=315&alt=45&z=100",name:"Rinnevalovarjostus",opacity:50,inspire:"Korkeus",maxScale:1},{styles:{},orgName:"Taustakartat",type:"base",baseLayerId:27,formats:{},isQueryable:false,id:"base_27",minScale:15000000,dataUrl:"",name:"Taustakartta",subLayer:[{wmsName:"taustakartta_5k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:125,minScale:5000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:5000",opacity:100,inspire:"Taustakartat",maxScale:1},{wmsName:"taustakartta_10k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:127,minScale:20000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:10k",opacity:100,inspire:"Taustakartat",maxScale:5001},{wmsName:"taustakartta_20k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:128,minScale:54000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:20k",opacity:100,inspire:"Taustakartat",maxScale:21000},{wmsName:"taustakartta_40k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:129,minScale:133000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:40k",opacity:100,inspire:"Taustakartat",maxScale:55000},{wmsName:"taustakartta_80k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:130,minScale:200000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:80k",opacity:100,inspire:"Taustakartat",maxScale:133000},{wmsName:"taustakartta_160k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:131,minScale:250000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:160k",opacity:100,inspire:"Taustakartat",maxScale:201000},{wmsName:"taustakartta_320k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:132,minScale:350000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:320k",opacity:100,inspire:"Taustakartat",maxScale:251000},{wmsName:"taustakartta_800k",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:133,minScale:800000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:800k",opacity:100,inspire:"Taustakartat",maxScale:351000},{wmsName:"taustakartta_2m",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:134,minScale:2000000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:2milj",opacity:100,inspire:"Taustakartat",maxScale:801000},{wmsName:"taustakartta_4m",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:135,minScale:4000000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:4milj",opacity:100,inspire:"Taustakartat",maxScale:2000001},{wmsName:"taustakartta_8m",styles:[{title:"Normaali v�ri",name:"normal"},{title:"Vaalennettu v�ri",name:"light"}],descriptionLink:"",baseLayerId:27,orgName:"Taustakartta",type:"wmslayer",legendImage:"",formats:{value:"application/vnd.ogc.gml"},isQueryable:false,id:136,minScale:15000000,style:"",dataUrl:"",wmsUrl:"http://wms.a.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.b.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.c.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?,http://wms.d.paikkatietoikkuna.fi/gwc/mml-rasteriaineistot?",name:"Taustakartta 1:8milj",opacity:100,inspire:"Taustakartat",maxScale:4000001}],inspire:"Taustakartta",maxScale:1}]},getMapConfiguration:function(){return this.conf
}});