/* This is a packed Oskari bundle (bundle script version Wed Feb 15 2012 20:10:12 GMT+0200 (Suomen normaaliaika)) */ 
Oskari.clazz.define("Oskari.mapframework.bundle.DefaultthirdpartymapsBundleInstance",function(a){this.name="thirdpartymaps";this.mediator=null;this.sandbox=null;this.conf=null;this.impl=null;this.ui=null},{init:function(){},createProjs:function(){var a=this;a.projs={"EPSG:3067":new OpenLayers.Projection("EPSG:3067"),"EPSG:4326":new OpenLayers.Projection("EPSG:4326"),"EPSG:900913":new OpenLayers.Projection("EPSG:900913")}},createMapPanel:function(){var a=this.libs.ext;var b=a.create("Ext.Panel",{height:384,region:"center",layout:"fit",items:[]});return b},createMap:function(){var c=new OpenLayers.Map(null,{projection:this.projs["EPSG:900913"],units:"m",maxResolution:156543.0339,maxExtent:new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34),theme:null});var a=new OpenLayers.Layer.OSM();var b=new OpenLayers.Layer.Google("Google Streets");c.addLayers([a,b]);c.addControl(new OpenLayers.Control.LayerSwitcher());c.moveMapToLanLot(new OpenLayers.LonLat(10.2,48.9).transform(this.projs["EPSG:4326"],c.getProjectionObject()),5);return c},createMapContainer:function(b){var a=this.libs.ext;var c=a.createWidget("nlsfimappanel",{olmap:b,layout:"absolute"});return c},start:function(){if(this.mediator.getState()=="started"){return}this.libs={ext:Oskari.$("Ext")};var f=Oskari.$("startup");var j=Oskari.$("UI.facade");this.facade=j;var h=j.getSandbox();this.sandbox=h;h.register(this);for(p in this.eventHandlers){h.registerForEventByName(this,p)}this.conf=f;var i=false;var g=false;var b=false;var d=false;this.createProjs();var e=this.createMapPanel();this._panel=e;var a=this.facade.appendExtensionModule(this,this.name,this.eventHandlers,this,"E",{fi:{title:""},sv:{title:"?"},en:{title:""}},e);this.def=a;this.map=this.createMap();var c=this.createMapContainer(this.map);this._mapster=c;e.add(c);this.mediator.setState("started");return this},centerMap:function(d,c,b,a){if(!b){return}this.map.setCenter(new OpenLayers.LonLat(c,d).transform(this.projs["EPSG:3067"],this.projs["EPSG:900913"]),12)},update:function(d,a,c,e){d.alert("RECEIVED update notification @BUNDLE_INSTANCE: "+e)},stop:function(){this.facade.removeExtensionModule(this.impl,this.name,{},this,this.def);this.def=null;for(p in this.eventHandlers){this.sandbox.unregisterFromEventByName(this,p)}this.sandbox.unregister(this);this.mediator.setState("stopped");return this},onEvent:function(a){return this.eventHandlers[a.getName()].apply(this,[a])},eventHandlers:{MouseHoverEvent:function(a){var c=a.getLat();var b=a.getLon();this.centerMap(c,b,false,8)},AfterMapMoveEvent:function(a){var c=a.getCenterY();var b=a.getCenterX();this.centerMap(c,b,true,a.getZoom());this.mediator.manager.alert("AfterMapMoveEvent "+c+","+b+" @Oskari.mapframework.bundle.DefaultMapModuleBundleInstance "+a.getName())}},getName:function(){return this.__name},__name:"Oskari.mapframework.bundle.DefaultthirdpartymapsBundleInstance"},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.bundle.extension.Extension"]});